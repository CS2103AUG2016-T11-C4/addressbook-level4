# pyokagan@gmail.com

###### src/test/java/seedu/address/logic/LogicManagerTest.java

``` java
public class LogicManagerTest {
    @Rule
    public ExpectedException thrown = ExpectedException.none();

    @Rule
    public TemporaryFolder saveFolder = new TemporaryFolder();

    private TypicalFloatingTasks tpflt = new TypicalFloatingTasks();

    @Spy
    private Model model = new ModelManager();

    @Mock
    private Storage storage;

    @Mock
    private Parser<Command> parser;

    private Logic logic;

    @Before
    public void setup() {
        MockitoAnnotations.initMocks(this);
        logic = new LogicManager(model, storage, parser);
    }

    @Test
    public void execute_commandThatReturnsCommandResult_returnsCommandResult() throws Exception {
        final CommandResult expected = new CommandResult("myResult");
        final CommandResult actual = logic.execute(model -> expected);
        assertEquals(expected, actual);
    }

    @Test
    public void execute_commandThrowsCommandException_throwsCommandException() throws Exception {
        thrown.expect(CommandException.class);
        thrown.expectMessage("some exception");
        logic.execute(model -> {
            throw new CommandException("some exception");
        });
    }

    @Test
    public void execute_parserReturnsCommand_executesThatReturnedCommand() throws Exception {
        final CommandResult someResult = new CommandResult("some result");
        final Command someCommand = model -> someResult;
        Mockito.when(parser.parse("some command")).thenReturn(someCommand);
        final CommandResult actual = logic.execute("some command");
        assertEquals(someResult, actual);
    }

    @Test
    public void execute_parserThrowsParseException_throwsParseException() throws Exception {
        Mockito.when(parser.parse("my command")).thenThrow(new ParseException("some parse exception"));
        thrown.expect(ParseException.class);
        thrown.expectMessage("some parse exception");
        logic.execute("my command");
    }

    @Test
    public void execute_withCommandThatModifiesTaskBook_savesTaskBook() throws Exception {
        logic.execute(model -> {
            model.addFloatingTask(tpflt.buyAHelicopter);
            return new CommandResult("task book modified");
        });
        Mockito.verify(storage).saveTaskBook(model.getTaskBook());
    }

    @Test
    public void execute_withCommandThatModifiesTaskBook_recordsState() throws Exception {
        final Command command = model -> {
            model.addFloatingTask(tpflt.readABook);
            return new CommandResult("task book modified");
        };
        logic.execute(command);
        Mockito.verify(model).recordState("task book modified");
    }

    @Test
    public void execute_withCommandThatModifiesConfig_savesConfig() throws Exception {
        logic.execute(model -> {
            model.setTaskBookFilePath("a");
            return new CommandResult("modified config");
        });
        Mockito.verify(storage).moveTaskBook("a");
    }

    @Test
    public void execute_withCommandThatModifiesConfig_recordsState() throws Exception {
        final Command command = model -> {
            model.setTaskBookFilePath("a");
            return new CommandResult("modified config");
        };
        logic.execute(command);
        Mockito.verify(model).recordState("modified config");
    }

    @Test
    public void execute_withCommandThatModifiesTaskBookPath_movesTaskBook() throws Exception {
        logic.execute(model -> {
            model.setTaskBookFilePath("a");
            return new CommandResult("modified task book path");
        });
        Mockito.verify(storage).moveTaskBook("a");
    }

}
```
###### src/test/java/seedu/address/logic/parser/SubcommandParserTest.java

``` java
public class SubcommandParserTest {

    @Rule
    public ExpectedException thrown = ExpectedException.none();

    private final ModelManager model = new ModelManager();

    private final SubcommandParser parser = new SubcommandParser();

    @Test
    public void parse_emptyString_throwsParseException() throws ParseException {
        thrown.expect(ParseException.class);
        thrown.expectMessage("No command name given");
        parser.parse("");
    }

    @Test
    public void parse_unknownCommand_throwsParseException() throws ParseException {
        thrown.expect(ParseException.class);
        thrown.expectMessage("Unknown command: banana");
        parser.parse(" banana ");
    }

    @Test
    public void parse_knownCommand_callsParseOfSubparser() throws ParseException {
        final Command someCommand = model -> {
            throw new AssertionError("should not be called");
        };
        final Parser<Command> subparser = mockParser();
        Mockito.when(subparser.parse(" ")).thenReturn(someCommand);
        parser.putSubcommand("apple", subparser);
        final Command command = parser.parse("apple ");
        assertTrue(command == someCommand);
        Mockito.verify(subparser).parse(" ");
    }

    @Test
    public void parse_subparserThrowsParseException_rethrowsParseException() throws ParseException {
        final ParseException cause = new ParseException("some parse exception");
        final Parser<Command> subparser = str -> {
            throw cause;
        };
        parser.putSubcommand("banana", subparser);
        thrown.expect(ParseException.class);
        thrown.expectMessage("banana: some parse exception");
        thrown.expectCause(CoreMatchers.is(cause));
        parser.parse("banana");
    }

    @Test
    public void autocomplete_caretAtCommandName_autocompletesCommand() {
        final Parser<Command> subparser = str -> {
            throw new AssertionError("should not be called");
        };
        parser.putSubcommand("banana", subparser);
        parser.putSubcommand("basketball", subparser);
        parser.putSubcommand("apple", subparser);
        // No command word
        assertEquals(Arrays.asList("apple", "banana", "basketball"), parser.autocomplete(model, "  ", 1));
        // Caret at end of command word
        assertEquals(Arrays.asList("anana", "asketball"), parser.autocomplete(model, " b", 2));
        // Caret must not be before end of command word
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "ban", 1));
        // Caret must not be after end of command word
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "ba ", 3));
        // Command word must not be quoted
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "\"ba\"", 4));
    }

    @Test
    public void autocomplete_caretAfterValidCommandName_autocompletesSubcommand() {
        final List<String> suggestions = Arrays.asList("apple", "pineapple");
        final Parser<Command> subparser = mockParser();
        Mockito.when(subparser.autocomplete(model, " ", 1)).thenReturn(suggestions);
        parser.putSubcommand("banana", subparser);
        assertEquals(suggestions, parser.autocomplete(model, "banana ", 7));
    }

    @SuppressWarnings("unchecked")
    private Parser<Command> mockParser() {
        return Mockito.mock(Parser.class);
    }

}
```
###### src/test/java/seedu/address/logic/parser/EditDeadlineParserTest.java

``` java
    @Test
    public void autocompleteName_returnsDeadlineTaskName() {
        assertEquals(Arrays.asList("Assemble The Missiles"), parser.autocomplete(model, "d1 n- ", 5));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "d2 n- ", 5));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "d1 n-a", 5));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "1 n-", 4));
    }

    @Test
    public void autocompleteDueDate_returnsDeadlineDueDate() {
        assertEquals(Arrays.asList("1/1/1970"), parser.autocomplete(model, "d1 dd- ", 6));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "d2 dd- ", 6));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "d1 dd-4/5", 6));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "1 dd-", 5));
    }

    @Test
    public void autocompleteDueTime_returnsDeadlineDueTime() {
        assertEquals(Arrays.asList("2am"), parser.autocomplete(model, "d1 dt- ", 6));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "d2 dt- ", 6));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "d1 dt-6am", 6));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "1 dt-", 5));
    }

}
```
###### src/test/java/seedu/address/logic/parser/TaskPredicateParserTest.java

``` java
public class TaskPredicateParserTest {

    private final ModelManager model = new ModelManager();

    private final TaskPredicateParser parser = new TaskPredicateParser(UNIX_EPOCH);

    @Test
    public void parse_withAll_returnsNull() throws ParseException {
        assertEquals(null, parser.parse("  "));
        assertEquals(null, parser.parse(" all "));
    }

    @Test
    public void parse_withFin_returnsTaskFinishedPredicate() throws ParseException {
        assertEquals(new TaskFinishedPredicate(UNIX_EPOCH), parser.parse(" fin "));
    }

    @Test
    public void parse_withUnfin_returnsTaskUnfinishedPredicate() throws ParseException {
        assertEquals(new TaskUnfinishedPredicate(UNIX_EPOCH), parser.parse(" unfin "));
    }

    @Test
    public void parse_unknownPredicateName_throwsParseException() {
        try {
            parser.parse(" invalid ");
            assert false;
        } catch (ParseException e) {
            assertEquals("unknown predicate: invalid", e.getMessage());
            assertEquals(Arrays.asList(new SubstringRange(0, 9)), e.getRanges());
        }
    }

    @Test
    public void autocomplete_returnsPredicateNamesStartingWithInput() {
        assertEquals(Arrays.asList("in"), parser.autocomplete(model, " f ", 2));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, " f ", 0));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, " f ", 3));
        assertEquals(Arrays.asList("all", "fin", "unfin"), parser.autocomplete(model, "  ", 1));
    }

}
```
###### src/test/java/seedu/address/logic/parser/TimeParserTest.java

``` java
public class TimeParserTest {

    private static final LocalTime TEST_TIME = LocalTime.of(3, 14);

    private TimeParser parser;

    @Before
    public void setupParser() {
        parser = new TimeParser(TEST_TIME);
    }

    @Test
    public void constructor() {
        assertEquals(TEST_TIME, parser.getReferenceTime());
    }

    @Test
    public void parse() throws Exception {
        // Missing minute component
        assertParse("  4am  ", LocalTime.of(4, 0));

        // . and : accepted, but must precede minute component
        assertParse("1.23pm", LocalTime.of(13, 23));
        assertParse("2:45am", LocalTime.of(2, 45));
        assertParseFail("5:am");

        // Hours (0-12)am/pm
        assertParse("12am", LocalTime.of(0, 0));
        assertParse("0am", LocalTime.of(0, 0)); // Yeah, we accept 0am because some people do use it apparently (?)
        assertParse("0pm", LocalTime.of(12, 0)); // Same for 0pm.
        assertParse("12pm", LocalTime.of(12, 0));
        assertParseFail("13am");

        // Minutes (0-59)
        assertParse("4:00am", LocalTime.of(4, 0));
        assertParse("4:59am", LocalTime.of(4, 59));
        assertParseFail("4:60am");
        assertParseFail("4:99am");

        // Must have two minute digits
        assertParseFail("4:0am");

        assertParseFail("not a time at all");
    }

    private void assertParse(String str, LocalTime expected) throws Exception {
        final LocalTime actual = parser.parse(str);
        assertEquals(expected, actual);
    }

    private void assertParseFail(String str) {
        try {
            parser.parse(str);
            fail("IllegalValueException was not thrown");
        } catch (IllegalValueException e) {
        }
    }

}
```
###### src/test/java/seedu/address/logic/parser/CommandLineParserTest.java

``` java
public class CommandLineParserTest {

    private ModelManager model = new ModelManager();

    @Test
    public void parse_emptyString() throws ParseException {
        CommandLineParser parser = new CommandLineParser();
        parser.parse("");
        parser.parse(" \t\r\n");
    }

    @Test
    public void parse_tooManyArguments_throwsException() {
        CommandLineParser parser;
        parser = new CommandLineParser();
        try {
            parser.parse("arg1");
            Assert.fail("ParseException not thrown");
        } catch (ParseException e) {
            List<SubstringRange> expectedRanges = Arrays.asList(new SubstringRange(0, 4));
            assertEquals("Too many arguments", e.getMessage());
            assertEquals(expectedRanges, e.getRanges());
        }

        CommandLineParser.Argument<String> arg1 = new CommandLineParser.Argument<>("arg1", str -> str);
        parser = new CommandLineParser().addArgument(arg1);
        try {
            parser.parse("arg1 arg2");
            Assert.fail("ParseException not thrown");
        } catch (ParseException e) {
            List<SubstringRange> expectedRanges = Arrays.asList(new SubstringRange(5, 9));
            assertEquals("Too many arguments", e.getMessage());
            assertEquals(expectedRanges, e.getRanges());
        }
    }

    @Test
    public void parse_withArguments() throws ParseException {
        final Object x = new Object(), y = new Object();
        CommandLineParser.Argument<Object> arg1 = new CommandLineParser.Argument<>("arg1", str -> {
            assertEquals("Arg1", str);
            return x;
        });
        CommandLineParser.Argument<Object> arg2 = new CommandLineParser.Argument<>("arg2", str -> {
            assertEquals("Arg2", str);
            return y;
        });
        CommandLineParser parser = new CommandLineParser().addArgument(arg1).addArgument(arg2);
        assertThrows(AssertionError.class, () -> arg1.getValue());
        assertThrows(AssertionError.class, () -> arg2.getValue());
        parser.parse(" \t\r\nArg1 \t\r\n\"Arg2\" \t\r\n");
        assertEquals(x, arg1.getValue());
        assertEquals(new SubstringRange(4, 8), arg1.getRange());
        assertEquals(y, arg2.getValue());
        assertEquals(new SubstringRange(12, 18), arg2.getRange());
    }

    @Test
    public void parse_withArgumentsButNotEnoughArguments_throwsException() {
        final Object x = new Object(), y = new Object();
        CommandLineParser.Argument<Object> arg1 = new CommandLineParser.Argument<>("arg1", str -> {
            assertEquals("Arg1", str);
            return x;
        });
        CommandLineParser.Argument<Object> arg2 = new CommandLineParser.Argument<>("arg2", str -> {
            assertEquals("Arg2", str);
            return y;
        });
        CommandLineParser parser = new CommandLineParser().addArgument(arg1).addArgument(arg2);
        try {
            parser.parse(" \t\r\nArg1 \t\r\n");
            Assert.fail("ParseException not thrown");
        } catch (ParseException e) {
            List<SubstringRange> expectedRanges = Arrays.asList(new SubstringRange(8, 12));
            assertEquals("Required argument not provided: arg2", e.getMessage());
            assertEquals(expectedRanges, e.getRanges());
        }
    }

    @Test
    public void parse_argumentParserThrowsException_throwsException() {
        final Object x = new Object();
        final ParseException myException = new ParseException("MyParseException",
                                                              new SubstringRange(0, 1),
                                                              new SubstringRange(1, 2));
        CommandLineParser.Argument<Object> arg1 = new CommandLineParser.Argument<>("arg1", str -> {
            assertEquals("Arg1", str);
            return x;
        });
        CommandLineParser.Argument<Object> arg2 = new CommandLineParser.Argument<>("arg2", str -> {
            throw myException;
        });
        CommandLineParser parser = new CommandLineParser().addArgument(arg1).addArgument(arg2);
        try {
            parser.parse("Arg1 Arg2");
            Assert.fail("ParseException not thrown");
        } catch (ParseException e) {
            List<SubstringRange> expectedRanges = Arrays.asList(new SubstringRange(5, 6), new SubstringRange(6, 7));
            assertEquals(myException, e.getCause());
            assertEquals("arg2: MyParseException", e.getMessage());
            assertEquals(expectedRanges, e.getRanges());
        }
        assertEquals(x, arg1.getValue());
        assertThrows(AssertionError.class, () -> arg2.getValue());
    }

    @Test
    public void parse_withListArgument_collectsArgumentsIntoList() throws ParseException {
        final Deque<String> expectedArgs = new ArrayDeque<>(Arrays.asList("Apple", "Banana", "Pear"));
        Parser<String> listParser = str -> {
            assertEquals(expectedArgs.poll(), str);
            return str.toUpperCase();
        };
        CommandLineParser.ListArgument<String> listArg = new CommandLineParser.ListArgument<>("LISTARG", str -> {
            throw new AssertionError("should not be called");
        });
        listArg.setParser(listParser);
        CommandLineParser parser = new CommandLineParser().addArgument(listArg);
        assertEquals("LISTARG", listArg.getName());
        assertEquals(Collections.emptyList(), listArg.getValues());
        assertThrows(AssertionError.class, () -> listArg.getRange());
        parser.parse("  Apple Banana Pear ");
        assertEquals(Arrays.asList("APPLE", "BANANA", "PEAR"), listArg.getValues());
        assertEquals(new SubstringRange(2, 19), listArg.getRange());
    }

    @Test
    public void parse_flag_parsesOutOfOrder() throws ParseException {
        CommandLineParser.Flag<String> flag1 = new CommandLineParser.Flag<>("f1-", "FLAG1", str -> {
            assertEquals("", str);
            return "flag1Value";
        });
        CommandLineParser.Flag<String> flag2 = new CommandLineParser.Flag<>("f2-", "FLAG2", str -> {
            assertEquals("value1", str);
            return "flag2Value";
        });
        CommandLineParser parser = new CommandLineParser().putFlag(flag1).putFlag(flag2);
        assertThrows(AssertionError.class, () -> flag1.getValue());
        assertThrows(AssertionError.class, () -> flag1.getRange());
        assertThrows(AssertionError.class, () -> flag2.getValue());
        assertThrows(AssertionError.class, () -> flag2.getRange());
        parser.parse(" \t\r\nf2- \t\r\nvalue1 \t\r\nf1- \t\r\n");
        assertEquals("flag1Value", flag1.getValue());
        assertEquals(new SubstringRange(28, 28), flag1.getRange());
        assertEquals("flag2Value", flag2.getValue());
        assertEquals(new SubstringRange(11, 17), flag2.getRange());
    }

    @Test
    public void parse_requiredFlagNotProvided_throwsParseException() {
        CommandLineParser.Flag<String> flag1 = new CommandLineParser.Flag<>("f1-", "FLAG1", str -> {
            throw new AssertionError("should not be called");
        });
        CommandLineParser parser = new CommandLineParser().putFlag(flag1);
        try {
            parser.parse("");
            assert false;
        } catch (ParseException e) {
            assertEquals("Required flag not provided: f1-FLAG1", e.getMessage());
        }
    }

    @Test
    public void parse_sameFlagSpecifiedMultipleTimes_throwsParseException() {
        CommandLineParser.Flag<String> flag1 = new CommandLineParser.Flag<>("f1-", "FLAG1", str -> {
            assertEquals("flag1Arg", str);
            return "flag1Value";
        });
        CommandLineParser parser = new CommandLineParser().putFlag(flag1);
        try {
            parser.parse("f1-flag1Arg f1-flag2Arg");
            assert false;
        } catch (ParseException e) {
            assertEquals("f1- specified multiple times", e.getMessage());
            assertEquals(Arrays.asList(new SubstringRange(15, 23)), e.getRanges());
        }
    }

    @Test
    public void parse_flagParserThrowsParseException_rethrowsParseException() {
        final Object x = new Object();
        final ParseException myException = new ParseException("MyParseException",
                                                              new SubstringRange(0, 1),
                                                              new SubstringRange(1, 2));
        CommandLineParser.Flag<Object> flag1 = new CommandLineParser.Flag<>("f1-", "flag1", str -> {
            assertEquals("Flag1", str);
            return x;
        });
        CommandLineParser.Flag<Object> flag2 = new CommandLineParser.Flag<>("f2-", "flag2", str -> {
            assertEquals("Flag2", str);
            throw myException;
        });
        CommandLineParser parser = new CommandLineParser().putFlag(flag1).putFlag(flag2);
        try {
            parser.parse("f1-Flag1 f2-Flag2");
            assert false;
        } catch (ParseException e) {
            List<SubstringRange> expectedRanges = Arrays.asList(new SubstringRange(12, 13), new SubstringRange(13, 14));
            assertEquals(myException, e.getCause());
            assertEquals("flag2: MyParseException", e.getMessage());
            assertEquals(expectedRanges, e.getRanges());
        }
        assertEquals(x, flag1.getValue());
        assertThrows(AssertionError.class, () -> flag2.getValue());
    }

    @Test
    public void autocomplete_withArguments_callsAutocompleteOfArgumentsAndReturnsCandidates() {
        final List<String> expectedAutocomplete = Arrays.asList("a", "b", "c");
        CommandLineParser.Argument<String> arg1 = new CommandLineParser.Argument<>("ARG1", new Parser<String>() {
            @Override
            public String parse(String str) throws ParseException {
                assertEquals("arg1", str);
                throw new ParseException("some exception"); // This is okay
            }

            @Override
            public List<String> autocomplete(ReadOnlyModel model, String input, int pos) {
                throw new AssertionError("should not be called");
            }
        });

        CommandLineParser.Argument<String> arg2 = new CommandLineParser.Argument<>("ARG2", new Parser<String>() {
            @Override
            public String parse(String str) throws ParseException {
                throw new AssertionError("should not be called");
            }

            @Override
            public List<String> autocomplete(ReadOnlyModel model, String input, int pos) {
                assertEquals("arg2", input);
                assertEquals(1, pos);
                return expectedAutocomplete;
            }
        });

        CommandLineParser parser = new CommandLineParser().addArgument(arg1).addArgument(arg2);
        assertEquals(expectedAutocomplete, parser.autocomplete(model, "arg1  arg2  ", 7));
        // The parser will skip quoted args because we do not handle it yet
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "arg1 \"arg2\"", 7));
    }

    @Test
    public void autocomplete_withListArgument_callsAutocompleteForAnyArgumentAndReturnsCandidates() {
        final List<String> expectedAutocomplete = Arrays.asList("a", "b", "c");
        CommandLineParser.ListArgument<String> listArg = new CommandLineParser.ListArgument<>("ARGS", new Parser<String>() {
            @Override
            public String parse(String str) throws ParseException {
                throw new AssertionError("should not be called");
            }

            @Override
            public List<String> autocomplete(ReadOnlyModel model, String input, int pos) {
                return expectedAutocomplete;
            }
        });

        CommandLineParser parser = new CommandLineParser().addArgument(listArg);
        assertEquals(expectedAutocomplete, parser.autocomplete(model, "arg1  arg2  ", 7));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "", 0));
    }

}
```
###### src/test/java/seedu/address/logic/parser/EditEventParserTest.java

``` java
public class EditEventParserTest {

    private final TypicalEventTasks tet = new TypicalEventTasks();

    private final ModelManager model = new ModelManager();

    private EditEventParser parser;

    @Before
    public void setupParser() {
        parser = new EditEventParser(UNIX_EPOCH);
        assertEquals(1, model.addEventTask(tet.lunchWithBillGates));
    }

    @Test
    public void parse() throws ParseException {
        // No modifications
        assertParse("e1", 1, null, null, null, null);

        // startDate
        assertParse("e2 sd-4/5/2016", 2, LocalDate.of(2016, 5, 4), null, null, null);

        // startTime
        assertParse("e3 st-5:32am", 3, null, LocalTime.of(5, 32), null, null);

        // endDate
        assertParse("e4 ed-7/8", 4, null, null, LocalDate.of(1970, 8, 7), null);

        // endTime
        assertParse("e5 et-7pm", 5, null, null, null, LocalTime.of(19, 0));

        // Index cannot be negative
        assertIncorrect("e-1");

        // Invalid flags
        assertIncorrect("e8 invalid-flag");
    }

    private void assertParse(String args, int targetIndex, LocalDate newStartDate, LocalTime newStartTime,
                             LocalDate newEndDate, LocalTime newEndTime) throws ParseException {
        final Command command = parser.parse(args);
        assertTrue(command instanceof EditEventCommand);
        final EditEventCommand editCommand = (EditEventCommand) command;
        assertEquals(targetIndex, editCommand.getTargetIndex());
        assertEquals(Optional.ofNullable(newStartDate), editCommand.getNewStartDate());
        assertEquals(Optional.ofNullable(newStartTime), editCommand.getNewStartTime());
        assertEquals(Optional.ofNullable(newEndDate), editCommand.getNewEndDate());
        assertEquals(Optional.ofNullable(newEndTime), editCommand.getNewEndTime());
    }

    private void assertIncorrect(String args) {
        assertThrows(ParseException.class, () -> parser.parse(args));
    }

    @Test
    public void autocompleteName_returnsEventTaskName() {
        assertEquals(Arrays.asList("Lunch with Bill Gates"), parser.autocomplete(model, "e1 n- ", 5));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "e2 n- ", 5));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "e1 n-a", 5));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "1 n-", 4));
    }

    @Test
    public void autocompleteStartDate_returnsEventStartDate() {
        assertEquals(Arrays.asList("1/1/1970"), parser.autocomplete(model, "e1 sd- ", 6));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "e2 sd- ", 6));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "e1 sd-4/5", 6));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "1 sd-", 5));
    }

    @Test
    public void autocompleteStartTime_returnsEventStartTime() {
        assertEquals(Arrays.asList("12am"), parser.autocomplete(model, "e1 st- ", 6));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "e2 st- ", 6));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "e1 st-4am", 6));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "1 st-", 5));
    }

    @Test
    public void autocompleteEndDate_returnsEventEndDate() {
        assertEquals(Arrays.asList("1/1/1970"), parser.autocomplete(model, "e1 ed- ", 6));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "e2 ed- ", 6));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "e1 ed-4/5", 6));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "1 ed-", 5));
    }

    @Test
    public void autocompleteEndTime_returnsEventEndTime() {
        assertEquals(Arrays.asList("1am"), parser.autocomplete(model, "e1 et- ", 6));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "e2 et- ", 6));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "e1 et-4am", 6));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "1 et-", 5));
    }

}
```
###### src/test/java/seedu/address/logic/parser/FileParserTest.java

``` java
public class FileParserTest {

    private final FileParser fileParser = new FileParser();

    @Test
    public void parse_withValidPath_returnsFile() throws ParseException {
        final File file = fileParser.parse(" a/b ");
        assertEquals(" a/b ", file.getPath());
    }

    @Test
    public void parse_withEmptyPath_throwsParseException() throws ParseException {
        try {
            fileParser.parse("");
            assert false;
        } catch (ParseException e) {
            assertEquals("path cannot be empty", e.getMessage());
            assertEquals(Arrays.asList(new SubstringRange(0, 0)), e.getRanges());
        }
    }

    @Test
    public void parse_withInvalidPath_throwsParseException() throws ParseException {
        // NUL character should be an invalid character on most operating systems.
        try {
            fileParser.parse("\0");
            assert false;
        } catch (ParseException e) {
            assertEquals(Arrays.asList(new SubstringRange(0, 1)), e.getRanges());
        }
    }

}
```
###### src/test/java/seedu/address/logic/parser/CommandLineScannerTest.java

``` java
public class CommandLineScannerTest {

    @Test
    public void constructor() {
        Collection<String> flagPrefixes = Arrays.asList("a", "b");
        CommandLineScanner scanner = new CommandLineScanner("hello world!", flagPrefixes);
        assertEquals("hello world!", scanner.getInput());
        assertEquals(flagPrefixes, scanner.getFlagPrefixes());
        assertEquals(0, scanner.getInputPosition());
        assertEquals("hello world!", scanner.getRemainingInput());
    }

    @Test
    public void copyConstructor() {
        Collection<String> flagPrefixes = Arrays.asList("c", "d");
        CommandLineScanner scanner = new CommandLineScanner("hello world!", flagPrefixes);
        CommandLineScanner copy = new CommandLineScanner(scanner);
        assertEquals("hello world!", copy.getInput());
        assertEquals(flagPrefixes, scanner.getFlagPrefixes());
        assertEquals(0, copy.getInputPosition());
        assertEquals("hello world!", copy.getRemainingInput());
    }

    @Test
    public void nextUnquotedString_skipsWhitespace() {
        CommandLineScanner scanner = new CommandLineScanner(" \t\r\n\"pineapple\" \t\r\n");
        assertEquals(Optional.of("\"pineapple\""), scanner.nextUnquotedString());
        assertEquals(15, scanner.getInputPosition());
        assertEquals(" \t\r\n", scanner.getRemainingInput());
        assertEquals(Optional.empty(), scanner.nextUnquotedString());
        assertEquals(19, scanner.getInputPosition());
        assertEquals("", scanner.getRemainingInput());
    }

    @Test
    public void nextQuotedString_skipsWhitespace() {
        CommandLineScanner scanner;
        scanner = new CommandLineScanner(" \t\r\n\"pineapple\" \t\r\n");
        assertEquals(Optional.of("pineapple"), scanner.nextQuotedString());
        assertEquals(15, scanner.getInputPosition());
        assertEquals(" \t\r\n", scanner.getRemainingInput());
        assertEquals(Optional.empty(), scanner.nextUnquotedString());
        assertEquals(19, scanner.getInputPosition());
        assertEquals("", scanner.getRemainingInput());
        scanner = new CommandLineScanner(" \t\r\n");
        assertEquals(Optional.empty(), scanner.nextQuotedString());
        assertEquals(4, scanner.getInputPosition());
    }

    @Test
    public void nextQuotedString_requiresQuotesOnBothEnds() {
        CommandLineScanner scanner;
        scanner = new CommandLineScanner("\"apple\"");
        assertEquals(Optional.of("apple"), scanner.nextQuotedString());
        scanner = new CommandLineScanner("\"apple");
        assertEquals(Optional.empty(), scanner.nextQuotedString());
        scanner = new CommandLineScanner("apple\"");
        assertEquals(Optional.empty(), scanner.nextQuotedString());
        scanner = new CommandLineScanner("\"a\"\"b\"");
        assertEquals(Optional.of("a"), scanner.nextQuotedString());
        assertEquals(Optional.of("b"), scanner.nextQuotedString());
    }

    @Test
    public void nextQuotedString_escapeQuotes() {
        CommandLineScanner scanner = new CommandLineScanner("\"escaped \\\"quo\\tes\\\"\"");
        assertEquals(Optional.of("escaped \"quo\\tes\""), scanner.nextQuotedString());
    }

    @Test
    public void nextQuotedString_empty() {
        CommandLineScanner scanner;
        scanner = new CommandLineScanner("\"\"");
        assertEquals(Optional.of(""), scanner.nextQuotedString());
        scanner = new CommandLineScanner("");
        assertEquals(Optional.empty(), scanner.nextQuotedString());
    }

    @Test
    public void nextArgument_unquoted_skipsWhitespace() {
        Optional<CommandLineScanner.Argument> expected, actual;
        CommandLineScanner scanner = new CommandLineScanner(" \t\r\napple \t\r\n");
        expected = Optional.of(new CommandLineScanner.Argument("apple", 4, 9, false));
        actual = scanner.nextArgument();
        assertEquals(expected, actual);
        assertEquals(9, scanner.getInputPosition());
        expected = Optional.empty();
        actual = scanner.nextArgument();
        assertEquals(expected, actual);
        assertEquals(13, scanner.getInputPosition());
    }

    @Test
    public void nextArgument_unquoted_stopsAtAnyFlag() {
        Collection<String> flagPrefixes = Arrays.asList("a-", "bc-");
        CommandLineScanner scanner;
        scanner = new CommandLineScanner("   a-xxx", flagPrefixes);
        assertEquals(Optional.empty(), scanner.nextArgument());
        scanner = new CommandLineScanner("bc-xxx", flagPrefixes);
        assertEquals(Optional.empty(), scanner.nextArgument());
    }

    @Test
    public void nextArgument_quoted_skipsWhitespace() {
        Optional<CommandLineScanner.Argument> expected, actual;
        CommandLineScanner scanner = new CommandLineScanner(" \t\r\n\"quoted\" \t\r\n");
        expected = Optional.of(new CommandLineScanner.Argument("quoted", 4, 12, true));
        actual = scanner.nextArgument();
        assertEquals(expected, actual);
        assertEquals(12, scanner.getInputPosition());
        expected = Optional.empty();
        actual = scanner.nextArgument();
        assertEquals(expected, actual);
        assertEquals(16, scanner.getInputPosition());
    }

    @Test
    public void nextArgument_quoted_doesNotCareAboutFlags() {
        Optional<CommandLineScanner.Argument> expected, actual;
        Collection<String> flagPrefixes = Arrays.asList("a-");
        CommandLineScanner scanner = new CommandLineScanner("\"a-not a flag\"", flagPrefixes);
        expected = Optional.of(new CommandLineScanner.Argument("a-not a flag", 0, 14, true));
        actual = scanner.nextArgument();
        assertEquals(expected, actual);
    }

    @Test
    public void nextRestArgument_skipsWhitespaceUntilAnyFlag() {
        CommandLineScanner.Argument expected, actual;
        Collection<String> flagPrefixes = Arrays.asList("a-", "bc-");
        CommandLineScanner scanner;
        scanner = new CommandLineScanner(" \t\r\na-xxx", flagPrefixes);
        expected = new CommandLineScanner.Argument("", 4, 4, false);
        actual = scanner.nextRestArgument();
        assertEquals(expected, actual);
        assertEquals(4, scanner.getInputPosition());
    }

    @Test
    public void nextRestArgument_unquoted_returnsSubstringUntilAnyFlag() {
        CommandLineScanner.Argument expected, actual;
        Collection<String> flagPrefixes = Arrays.asList("a-", "bc-");
        CommandLineScanner scanner;
        scanner = new CommandLineScanner(" a \"b\"  \\\" \t\r\na-", flagPrefixes);
        expected = new CommandLineScanner.Argument("a \"b\"  \\\"", 1, 10, false);
        actual = scanner.nextRestArgument();
        assertEquals(expected, actual);
        assertEquals(14, scanner.getInputPosition());
        scanner = new CommandLineScanner(" a \"b\"  \\\" \t\r\nbc-", flagPrefixes);
        expected = new CommandLineScanner.Argument("a \"b\"  \\\"", 1, 10, false);
        actual = scanner.nextRestArgument();
        assertEquals(expected, actual);
        assertEquals(14, scanner.getInputPosition());
    }

    @Test
    public void nextRestArgument_unquoted_scansUntilEnd() {
        CommandLineScanner.Argument expected, actual;
        CommandLineScanner scanner = new CommandLineScanner(" a b \t\r\n");
        expected = new CommandLineScanner.Argument("a b", 1, 4, false);
        actual = scanner.nextRestArgument();
        assertEquals(expected, actual);
        assertEquals(8, scanner.getInputPosition());
    }

    @Test
    public void nextRestArgument_quoted_onlyReturnsQuoted() {
        CommandLineScanner.Argument expected, actual;
        Collection<String> flagPrefixes = Arrays.asList("a-", "bc-");
        CommandLineScanner scanner;
        scanner = new CommandLineScanner(" \"a- bc-\" d", flagPrefixes);
        expected = new CommandLineScanner.Argument("a- bc-", 1, 9, true);
        actual = scanner.nextRestArgument();
        assertEquals(expected, actual);
        assertEquals(9, scanner.getInputPosition());
    }

    @Test
    public void nextFlag_skipsWhitespaceUntilEnd() throws Exception {
        Optional<CommandLineScanner.Flag> expected, actual;
        CommandLineScanner scanner = new CommandLineScanner(" \t\r\n");
        expected = Optional.empty();
        actual = scanner.nextFlag();
        assertEquals(expected, actual);
        assertEquals(4, scanner.getInputPosition());
    }

    @Test
    public void nextFlag_unquoted_scansUntilNextFlag() throws Exception {
        Optional<CommandLineScanner.Flag> expected, actual;
        Collection<String> flagPrefixes = Arrays.asList("a-", "bc-");
        CommandLineScanner scanner;
        scanner = new CommandLineScanner(" \t\r\na- some  args c-bc- bc-", flagPrefixes);
        expected = Optional.of(new CommandLineScanner.Flag("a-", "some  args c-bc-", 7, 23, false));
        actual = scanner.nextFlag();
        assertEquals(expected, actual);
        assertEquals(24, scanner.getInputPosition());
        scanner = new CommandLineScanner(" \t\r\nbc- some more args \t\r\n", flagPrefixes);
        expected = Optional.of(new CommandLineScanner.Flag("bc-", "some more args", 8, 22, false));
        actual = scanner.nextFlag();
        assertEquals(expected, actual);
        assertEquals(26, scanner.getInputPosition());
    }

    @Test
    public void nextFlag_quoted_scansQuotedOnly() throws Exception {
        Optional<CommandLineScanner.Flag> expected, actual;
        Collection<String> flagPrefixes = Arrays.asList("a-", "bc-");
        CommandLineScanner scanner;
        scanner = new CommandLineScanner(" \t\r\na-\" quoted \" not", flagPrefixes);
        expected = Optional.of(new CommandLineScanner.Flag("a-", " quoted ", 6, 16, true));
        actual = scanner.nextFlag();
        assertEquals(expected, actual);
        assertEquals(16, scanner.getInputPosition());
        scanner = new CommandLineScanner(" \t\r\nbc- \"quoted\"", flagPrefixes);
        expected = Optional.of(new CommandLineScanner.Flag("bc-", "quoted", 8, 16, true));
        actual = scanner.nextFlag();
        assertEquals(expected, actual);
        assertEquals(16, scanner.getInputPosition());
    }

    @Test
    public void nextFlag_notAFlag_returnsEmpty() {
        CommandLineScanner scanner = new CommandLineScanner("notaflag-");
        try {
            scanner.nextFlag();
            Assert.fail("ParseException not thrown");
        } catch (ParseException e) {
            List<SubstringRange> expectedRanges = Arrays.asList(new SubstringRange(0, 9));
            assertEquals(expectedRanges, e.getRanges());
        }
    }

}
```
###### src/test/java/seedu/address/logic/parser/DateParserTest.java

``` java
public class DateParserTest {

    private static final LocalDate TEST_DATE = LocalDate.of(2015, 3, 14);

    @Rule
    public ExpectedException thrown = ExpectedException.none();

    private DateParser parser;

    @Before
    public void setupParser() {
        parser = new DateParser(TEST_DATE);
    }

    @Test
    public void constructor() {
        assertEquals(TEST_DATE, parser.getReferenceDate());
    }

    @Test
    public void parse() throws Exception {
        // Supported constants
        assertParse("tdy", TEST_DATE);
        assertParse("tmr", TEST_DATE.plusDays(1));
        assertParse("yst", TEST_DATE.minusDays(1));

        // Different components present/missing
        assertParse(" 1 ", LocalDate.of(2015, 3, 1));
        assertParse("1/2", LocalDate.of(2015, 2, 1));
        assertParse("1/2/2014", LocalDate.of(2014, 2, 1));

        // Min and max days
        assertParseFail("0/1/2016"); // No such day
        assertParse("31/12/2014", LocalDate.of(2014, 12, 31)); // December has 31 days
        assertParseFail("31/9/2016"); // September only has 30 days
        assertParse("29/2/2016", LocalDate.of(2016, 2, 29)); // A leap year
        assertParseFail("29/2/2015"); // Not a leap year

        // Min and max months
        assertParseFail("1/0/2015"); // No such month
        assertParseFail("1/13/2015"); // No such month

        // Min and max years
        assertParseFail("1/2/14"); // We don't support 2-digit years
        assertParse("1/1/0000", LocalDate.of(0, 1, 1));
        assertParse("1/1/9999", LocalDate.of(9999, 1, 1));

        assertParseFail("not a date at all");
    }

    @Test
    public void parse_nullString_throwsAssertionError() throws Exception {
        thrown.expect(AssertionError.class);
        parser.parse(null);
    }

    private void assertParse(String str, LocalDate expected) throws Exception {
        final LocalDate actual = parser.parse(str);
        assertEquals(expected, actual);
    }

    private void assertParseFail(String str) {
        try {
            parser.parse(str);
            fail("IllegalValueException was not thrown");
        } catch (IllegalValueException e) {
        }
    }

}
```
###### src/test/java/seedu/address/logic/parser/AddEventParserTest.java

``` java
public class AddEventParserTest {

    private AddEventParser parser;

    @Before
    public void setupParser() {
        parser = new AddEventParser(PI_DAY);
    }

    @Test
    public void parse() throws ParseException {
        // All arguments provided
        assertParse("\"a\" 1/2/2000 4:30am to 2/3/2100 6:32pm", "a", LocalDateTime.of(2000, 2, 1, 4, 30),
                    LocalDateTime.of(2100, 3, 2, 18, 32));

        // If startDate is not given, then it is the current date
        assertParse("\"a\" 7:23am to 4/6/2654 8:24pm", "a", LocalDateTime.of(2653, 9, 15, 7, 23),
                LocalDateTime.of(2654, 6, 4, 20, 24));

        // If startTime is not given, then it is 12am
        assertParse("\"a\" 3/4/2015 to 4/5/2015 7pm", "a", LocalDateTime.of(2015, 4, 3, 0, 0),
                LocalDateTime.of(2015, 5, 4, 19, 0));

        // If endDate is not given, then it is the same as startDate
        assertParse("\"a\" 1/2/2000 5:41am to 6:32pm", "a", LocalDateTime.of(2000, 2, 1, 5, 41),
                LocalDateTime.of(2000, 2, 1, 18, 32));

        // If endTime is not given, then it is 11.59pm
        assertParse("\"a\" 8/7/2014 12:45am to 9/7/2014", "a",
                LocalDateTime.of(2014, 7, 8, 0, 45), LocalDateTime.of(2014, 7, 9, 23, 59));

        // Must have at least one of { startDate, startTime }, and at least one of { endDate, endTime }
        assertIncorrect("\"a\" 1/2/2000 4:30am");
        assertIncorrect("\"a\"");
        assertIncorrect("");

        // Must have keyword "to"
        assertIncorrect("\"a\" 4/5/2016 7:23am 6/7/2017 8:42pm");

        // Too many arguments
        assertIncorrect("\"a\" 4/5/2016 7:23am to 6/7/2017 8:42pm extraArg");
    }

    private void assertParse(String args, String name, LocalDateTime start, LocalDateTime end) throws ParseException {
        final EventTask expected;
        try {
            expected = new EventTask(name, start, end);
        } catch (IllegalValueException e) {
            throw new AssertionError("should not happen", e);
        }
        final Command command = parser.parse(args);
        assertTrue(command instanceof AddEventCommand);
        assertEquals(expected, ((AddEventCommand)command).getTask());
    }

    private void assertIncorrect(String args) {
        assertThrows(ParseException.class, () -> parser.parse(args));
    }

}
```
###### src/test/java/seedu/address/logic/parser/EditFloatingTaskParserTest.java

``` java
    @Test
    public void autocompleteName_returnsFloatingTaskName() {
        assertEquals(Arrays.asList("buy A Helicopter"), parser.autocomplete(model, "f1 n- ", 5));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "f2 n- ", 5));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "f1 n-a", 5));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "1 n-", 4));
    }

    @Test
    public void autocompletePriority_returnsFloatingTaskPriority() {
        assertEquals(Arrays.asList("4"), parser.autocomplete(model, "f1 p- ", 5));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "f2 p- ", 5));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "f1 p-3", 5));
        assertEquals(Collections.emptyList(), parser.autocomplete(model, "1 p-", 4));
    }

}
```
###### src/test/java/seedu/address/logic/parser/IndexParserTest.java

``` java
public class IndexParserTest {

    @Test
    public void parse_emptyString_throwsException() {
        final IndexParser parser = new IndexParser("abc", "ultra parser index");
        try {
            parser.parse("");
            assert false;
        } catch (ParseException e) {
            assertEquals("ultra parser index must start with \"abc\"", e.getMessage());
            List<SubstringRange> expected = Arrays.asList(new SubstringRange(0, 0));
            assertEquals(expected, e.getRanges());
        }
    }

    @Test
    public void parse_notPrefixed_throwsException() {
        final IndexParser parser = new IndexParser("gh", "super parser index");
        try {
            parser.parse("g14");
        } catch (ParseException e) {
            assertEquals("super parser index must start with \"gh\"", e.getMessage());
            List<SubstringRange> expected = Arrays.asList(new SubstringRange(0, 2));
            assertEquals(expected, e.getRanges());
        }
    }

    @Test
    public void parse_notUnsignedInteger_throwsException() {
        final IndexParser parser = new IndexParser("abc", "banana");
        try {
            parser.parse("abc0");
        } catch (ParseException e) {
            assertEquals("invalid banana: 0", e.getMessage());
            List<SubstringRange> expected = Arrays.asList(new SubstringRange(3, 4));
            assertEquals(expected, e.getRanges());
        }
    }

    @Test
    public void parse_validIndex_returnsIntegerMinusOne() throws Exception {
        final IndexParser parser = new IndexParser("453", "super parser index");
        int index = parser.parse("4539001");
        assertEquals(9001, index);
    }

}
```
###### src/test/java/seedu/address/logic/commands/AddEventCommandTest.java

``` java
public class AddEventCommandTest {

    private final TypicalEventTasks tet = new TypicalEventTasks();

    @Mock
    private Model model;

    @Before
    public void setup() throws Exception {
        MockitoAnnotations.initMocks(this);
    }

    @Test
    public void execute_addsEventToModel() {
        Mockito.when(model.addEventTask(tet.lunchWithBillGates)).thenReturn(1);
        final AddEventCommand cmd = new AddEventCommand(tet.lunchWithBillGates);
        final CommandResult result = cmd.execute(model);
        assertEquals("Added new event task \"Lunch with Bill Gates\", from \"01/01/1970 Time: 00:00\" to "
                     + "\"01/01/1970 Time: 01:00\".", result.feedbackToUser);
        Mockito.verify(model).addEventTask(tet.lunchWithBillGates);
    }

}
```
###### src/test/java/seedu/address/logic/commands/ListCommandTest.java

``` java
public class ListCommandTest {

    @Mock
    private Model model;

    @Before
    public void setup() throws Exception {
        MockitoAnnotations.initMocks(this);
        Mockito.when(model.getEventTask(1)).thenReturn(new EventTask("Lunch with Bill Gates", UNIX_EPOCH,
                                                                     UNIX_EPOCH.plusHours(1)));
    }

    @Test
    public void execute_withNullTaskPredicate_replacesTaskPredicate() {
        final ListCommand cmd = new ListCommand(null);
        final CommandResult result = cmd.execute(model);
        assertEquals("Listing all tasks.", result.feedbackToUser);
        Mockito.verify(model).setTaskPredicate(null);
    }

    @Test
    public void execute_withNonNullTaskPredicate_replacesTaskPredicate() {
        final FalseTaskPredicate predicate = new FalseTaskPredicate();
        final ListCommand cmd = new ListCommand(predicate);
        final CommandResult result = cmd.execute(model);
        assertEquals("Listing all tasks matching filter: false task predicate", result.feedbackToUser);
        Mockito.verify(model).setTaskPredicate(predicate);
    }

}
```
###### src/test/java/seedu/address/logic/commands/MarkFloatingTaskFinishedCommandTest.java

``` java
    @Test
    public void execute_invalidTargetIndex_throwsCommandException() throws Exception {
        thrown.expect(CommandException.class);
        thrown.expectMessage("index does not exist");
        new MarkFloatingTaskFinishedCommand(1).execute(model);
    }

    @Test
    public void execute_nullModel_throwsAssertionError() throws Exception {
        thrown.expect(AssertionError.class);
        new MarkFloatingTaskFinishedCommand(1).execute(null);
    }

}
```
###### src/test/java/seedu/address/logic/commands/ExitCommandTest.java

``` java
public class ExitCommandTest {

    @Test
    public void execute() {
        final ModelManager model = new ModelManager();
        final ExitCommand command = new ExitCommand();
        final CommandResult result = command.execute(model);
        assertEquals("Exiting as requested...", result.feedbackToUser);
        assertTrue(result instanceof ExitCommandResult);
    }

}
```
###### src/test/java/seedu/address/logic/commands/DeleteEventCommandTest.java

``` java
public class DeleteEventCommandTest {

    private final TypicalEventTasks tet = new TypicalEventTasks();

    @Mock
    private Model model;

    @Before
    public void setup() throws Exception {
        MockitoAnnotations.initMocks(this);
    }

    @Test
    public void execute_withValidTargetIndex_removesEventTask() throws Exception {
        Mockito.when(model.removeEventTask(1)).thenReturn(tet.lunchWithBillGates);
        final DeleteEventCommand cmd = new DeleteEventCommand(1);
        final CommandResult result = cmd.execute(model);
        assertEquals("Deleted event e1. Lunch with Bill Gates", result.feedbackToUser);
        Mockito.verify(model).removeEventTask(1);
    }

    @Test
    public void execute_withInvalidTargetIndex_throwsCommandExeption() throws Exception {
        final IllegalValueException e = new IllegalValueException("invalid index");
        Mockito.when(model.removeEventTask(1)).thenThrow(e);
        final DeleteEventCommand cmd = new DeleteEventCommand(1);
        try {
            cmd.execute(model);
            assert false;
        } catch (CommandException ce) {
            assertEquals(e, ce.getCause());
            assertEquals("invalid index", ce.getMessage());
            Mockito.verify(model).removeEventTask(1);
        }
    }

}
```
###### src/test/java/seedu/address/logic/commands/EditDeadlineCommandTest.java

``` java
public class EditDeadlineCommandTest {

    @Mock
    private Model model;

    @Before
    public void setup() throws Exception {
        MockitoAnnotations.initMocks(this);
        Mockito.when(model.getDeadlineTask(1)).thenReturn(new DeadlineTask(new Name("Finish project"),
                                                                           UNIX_EPOCH.plusDays(1), true));
    }

    @Test
    public void execute_withNoEdits_replacesNothing() throws Exception {
        final DeadlineTask expected = new DeadlineTask(new Name("Finish project"), UNIX_EPOCH.plusDays(1), true);
        final EditDeadlineCommand cmd = new EditDeadlineCommand(1, Optional.empty(), Optional.empty(),
                                                                Optional.empty());
        final CommandResult result = cmd.execute(model);
        assertEquals("Edited deadline task d1.", result.feedbackToUser);
        Mockito.verify(model).setDeadlineTask(1, expected);
    }

```
###### src/test/java/seedu/address/logic/commands/MarkFloatingTaskUnfinishedCommandTest.java

``` java
public class MarkFloatingTaskUnfinishedCommandTest {
    @Rule
    public ExpectedException thrown = ExpectedException.none();

    private final TypicalFloatingTasks tft = new TypicalFloatingTasks();
    private final Model model = new ModelManager();

    @Test
    public void execute_withValidTargetIndex_marksUnfinished() throws Exception {
        final FloatingTask readABook = new FloatingTaskBuilder(tft.readABook)
                                            .setFinished(true).build();
        final FloatingTask eatAnApple = new FloatingTaskBuilder(tft.eatAnApple)
                                            .setFinished(true).build();
        assertEquals(1, model.addFloatingTask(readABook));
        assertEquals(2, model.addFloatingTask(eatAnApple));
        final CommandResult result = new MarkFloatingTaskUnfinishedCommand(1).execute(model);
        assertEquals("Floating task f1 unfinished.", result.feedbackToUser);
        assertEquals(tft.readABook, model.getFloatingTask(1));
        assertEquals(eatAnApple, model.getFloatingTask(2));
    }

    @Test
    public void execute_invalidTargetIndex_throwsCommandException() throws Exception {
        thrown.expect(CommandException.class);
        thrown.expectMessage("index does not exist");
        new MarkFloatingTaskUnfinishedCommand(1).execute(model);
    }

    @Test
    public void execute_nullModel_throwsAssertionError() throws Exception {
        thrown.expect(AssertionError.class);
        new MarkFloatingTaskUnfinishedCommand(1).execute(null);
    }

}
```
###### src/test/java/seedu/address/logic/commands/EditFloatingTaskCommandTest.java

``` java
public class EditFloatingTaskCommandTest {

    @Mock
    private Model model;

    @Before
    public void setup() throws Exception {
        MockitoAnnotations.initMocks(this);
        Mockito.when(model.getFloatingTask(1)).thenReturn(new FloatingTask(new Name("Finish project"),
                                                                           new Priority("5"), true));
    }

    @Test
    public void execute_withNoEdits_replacesNothing() throws Exception {
        final FloatingTask expected = new FloatingTask(new Name("Finish project"), new Priority("5"), true);
        final EditFloatingTaskCommand cmd = new EditFloatingTaskCommand(1, Optional.empty(), Optional.empty());
        final CommandResult result = cmd.execute(model);
        assertEquals("Edited floating task f1.", result.feedbackToUser);
        Mockito.verify(model).setFloatingTask(1, expected);
    }

```
###### src/test/java/seedu/address/logic/commands/ClearAllCommandTest.java

``` java
public class ClearAllCommandTest {

    @Test
    public void execute_clearsTasksInModel() {
        final TaskBook taskBook = new TaskBookBuilder().addTypicalTasks().build();
        final Model model = new ModelManager(new Config(), taskBook);
        final ClearAllCommand command = new ClearAllCommand();
        final CommandResult result = command.execute(model);
        assertEquals(new TaskBook(), model.getTaskBook());
        assertEquals("Task book has been cleared!", result.feedbackToUser);
    }

}
```
###### src/test/java/seedu/address/logic/commands/EditEventCommandTest.java

``` java
public class EditEventCommandTest {

    @Mock
    private Model model;

    @Before
    public void setup() throws Exception {
        MockitoAnnotations.initMocks(this);
        Mockito.when(model.getEventTask(1)).thenReturn(new EventTask("Lunch with Bill Gates", UNIX_EPOCH,
                                                                     UNIX_EPOCH.plusHours(1)));
    }

    @Test
    public void execute_withNewName_replacesName() throws Exception {
        final EventTask expected = new EventTask("Lunch with myself", UNIX_EPOCH, UNIX_EPOCH.plusHours(1));
        final EditEventCommand cmd = new EditEventCommand(1, Optional.of(new Name("Lunch with myself")),
                                                          Optional.empty(), Optional.empty(),
                                                          Optional.empty(), Optional.empty());
        final CommandResult result = cmd.execute(model);
        assertEquals("Edited event task e1.", result.feedbackToUser);
        Mockito.verify(model).setEventTask(1, expected);
    }

    @Test
    public void execute_withNewStartDate_replacesStartDate() throws Exception {
        final EventTask expected = new EventTask("Lunch with Bill Gates",
                                                 LocalDateTime.of(1960, 1, 1, 0, 0),
                                                 UNIX_EPOCH.plusHours(1));
        final EditEventCommand cmd = new EditEventCommand(1, Optional.empty(),
                                                          Optional.of(LocalDate.of(1960, 1, 1)),
                                                          Optional.empty(), Optional.empty(),
                                                          Optional.empty());
        final CommandResult result = cmd.execute(model);
        assertEquals("Edited event task e1.", result.feedbackToUser);
        Mockito.verify(model).setEventTask(1, expected);
    }

    @Test
    public void execute_withNewStartTime_replacesStartTime() throws Exception {
        final EventTask expected = new EventTask("Lunch with Bill Gates", UNIX_EPOCH.plusMinutes(1),
                                                 UNIX_EPOCH.plusHours(1));
        final EditEventCommand cmd = new EditEventCommand(1, Optional.empty(), Optional.empty(),
                                                          Optional.of(LocalTime.of(0, 1)), Optional.empty(),
                                                          Optional.empty());
        final CommandResult result = cmd.execute(model);
        assertEquals("Edited event task e1.", result.feedbackToUser);
        Mockito.verify(model).setEventTask(1, expected);
    }

    @Test
    public void execute_withNewEndDate_replacesEndDate() throws Exception {
        final EventTask expected = new EventTask("Lunch with Bill Gates", UNIX_EPOCH,
                                                 LocalDateTime.of(2653, 9, 15, 1, 0));
        final EditEventCommand cmd = new EditEventCommand(1, Optional.empty(), Optional.empty(),
                                                          Optional.empty(),
                                                          Optional.of(LocalDate.of(2653, 9, 15)),
                                                          Optional.empty());
        final CommandResult result = cmd.execute(model);
        assertEquals("Edited event task e1.", result.feedbackToUser);
        Mockito.verify(model).setEventTask(1, expected);
    }

    @Test
    public void execute_withNewEndTime_replacesEndTime() throws Exception {
        final EventTask expected = new EventTask("Lunch with Bill Gates", UNIX_EPOCH,
                                                LocalDateTime.of(1970, 1, 1, 12, 34));
        final EditEventCommand cmd = new EditEventCommand(1, Optional.empty(), Optional.empty(),
                                                          Optional.empty(), Optional.empty(),
                                                          Optional.of(LocalTime.of(12, 34)));
        final CommandResult result = cmd.execute(model);
        assertEquals("Edited event task e1.", result.feedbackToUser);
        Mockito.verify(model).setEventTask(1, expected);
    }

}
```
###### src/test/java/seedu/address/logic/commands/MarkDeadlineUnfinishedCommandTest.java

``` java
public class MarkDeadlineUnfinishedCommandTest {
    @Rule
    public ExpectedException thrown = ExpectedException.none();

    private final TypicalDeadlineTasks tdt = new TypicalDeadlineTasks();
    private final Model model = new ModelManager();

    @Test
    public void execute_withValidTargetIndex_marksUnfinished() throws Exception {
        final DeadlineTask assembleTheMissiles = new DeadlineTaskBuilder(tdt.assembleTheMissiles)
                                                        .setFinished(true).build();
        final DeadlineTask completeHomework = new DeadlineTaskBuilder(tdt.completeHomework)
                                                .setFinished(true).build();
        assertEquals(1, model.addDeadlineTask(assembleTheMissiles));
        assertEquals(2, model.addDeadlineTask(completeHomework));
        final CommandResult result = new MarkDeadlineUnfinishedCommand(1).execute(model);
        assertEquals("Deadline task d1 unfinished.", result.feedbackToUser);
        assertEquals(tdt.assembleTheMissiles, model.getDeadlineTask(1));
        assertEquals(completeHomework, model.getDeadlineTask(2));
    }

    @Test
    public void execute_invalidTargetIndex_throwsCommandException() throws Exception {
        thrown.expect(CommandException.class);
        thrown.expectMessage("index does not exist");
        new MarkDeadlineUnfinishedCommand(1).execute(model);
    }

    @Test
    public void execute_nullModel_throwsAssertionError() throws Exception {
        thrown.expect(AssertionError.class);
        new MarkDeadlineUnfinishedCommand(1).execute(null);
    }

}
```
###### src/test/java/seedu/address/logic/commands/HelpCommandTest.java

``` java
public class HelpCommandTest {

    @Test
    public void execute() {
        final HelpCommand command = new HelpCommand();
        final ModelManager model = new ModelManager();
        final CommandResult result = command.execute(model);
        assertEquals("Opening help window...", result.feedbackToUser);
        assertTrue(result instanceof HelpCommandResult);
    }

}
```
###### src/test/java/seedu/address/MainAppTest.java

``` java
/**
 * Integration tests
 */
@Category({GuiTests.class})
public class MainAppTest extends FxRobot {

    @Rule
    public TemporaryFolder tempFolder = new TemporaryFolder();

    private Application application;

    @BeforeClass
    public static void setupFxToolkit() throws Exception {
        FxToolkit.registerPrimaryStage();
    }

    @Before
    public void setup() throws Exception {
        File configFile = setupConfig(new File(tempFolder.getRoot(), "taskbook.json"),
                                      new File(tempFolder.getRoot(), "userprefs.json"));
        application = FxToolkit.setupApplication(() -> new MainApp(configFile.getAbsolutePath()));
        FxToolkit.showStage();
    }

    private File setupConfig(File taskBookFile, File userPrefsFile) throws Exception {
        File configFile = tempFolder.newFile("config.json");
        JsonGenerator jgen = new JsonFactory().createGenerator(configFile, JsonEncoding.UTF8);
        jgen.writeStartObject();
        jgen.writeObjectField("taskBookFilePath", taskBookFile.getAbsolutePath());
        jgen.writeObjectField("userPrefsFilePath", userPrefsFile.getAbsolutePath());
        jgen.writeEndObject();
        jgen.close();
        return configFile;
    }

    @After
    public void teardown() throws Exception {
        FxToolkit.cleanupApplication(application);
    }

    @Test
    public void startStop() {
    }

}
```
###### src/test/java/seedu/address/testutil/TestUtil.java

``` java
/**
 * A utility class for test cases.
 */
public class TestUtil {

    public interface AssertThrowsCallback {
        void call() throws Exception;
    }

```
###### src/test/java/seedu/address/model/filter/FalseTaskPredicate.java

``` java
/**
 * A predicate that returns false for all floating, deadline and event tasks.
 */
public class FalseTaskPredicate implements TaskPredicate {

    @Override
    public boolean test(FloatingTask floatingTask) {
        return false;
    }

    @Override
    public boolean test(DeadlineTask deadlineTask) {
        return false;
    }

    @Override
    public boolean test(EventTask eventTask) {
        return false;
    }

    @Override
    public String toHumanReadableString() {
        return "false task predicate";
    }

}
```
###### src/test/java/seedu/address/model/TestIndexedItem.java

``` java
/**
 * A test utility class for doing comparisons with other {@link IndexedItem}.
 */
public class TestIndexedItem<E> implements IndexedItem<E> {
    private final int workingIndex;
    private final E item;

    public TestIndexedItem(int workingIndex, E item) {
        this.workingIndex = workingIndex;
        this.item = item;
    }

    @Override
    public int getWorkingIndex() {
        return workingIndex;
    }

    @Override
    public E getItem() {
        return item;
    }

    @Override
    public boolean equals(Object other) {
        return other == this
               || (other instanceof IndexedItem<?>
               && workingIndex == ((IndexedItem<?>)other).getWorkingIndex()
               && item.equals(((IndexedItem<?>)other).getItem()));
    }

    @Override
    public String toString() {
        return MoreObjects.toStringHelper(this)
                .add("workingIndex", workingIndex)
                .add("item", item)
                .toString();
    }
}
```
###### src/test/java/seedu/address/model/ModelTest.java

``` java
    @Test
    public void constructor() {
        assertEquals(Collections.emptyList(), model.getFloatingTaskList());
        assertEquals(Collections.emptyList(), model.getEventTaskList());
        assertEquals(Collections.emptyList(), model.getDeadlineTaskList());
        assertEquals(WorkingTaskBook.DEFAULT_FLOATING_TASK_COMPARATOR, model.getFloatingTaskComparator());
        assertEquals(WorkingTaskBook.DEFAULT_DEADLINE_TASK_COMPARATOR, model.getDeadlineTaskComparator());
        assertEquals(WorkingTaskBook.DEFAULT_EVENT_TASK_COMPARATOR, model.getEventTaskComparator());
        assertEquals(Optional.empty(), model.getTaskSelect());
        assertFalse(model.hasUncommittedChanges());
        assertEquals(model.getTaskBookFilePath(), "data/taskbook.json");
    }

    @Test
    public void addFloatingTask_appendsFloatingTask() throws Exception {
        assertEquals(1, model.addFloatingTask(tpflt.readABook));
        assertEquals(tpflt.readABook, model.getFloatingTask(1));
        assertEquals(2, model.addFloatingTask(tpflt.buyAHelicopter));
        // Given the corresponding workindIndexes, getFloatingTask() returns the tasks we expect
        assertEquals(tpflt.readABook, model.getFloatingTask(1));
        assertEquals(tpflt.buyAHelicopter, model.getFloatingTask(2));
        // However, the list itself is sorted according to DEFAULT_FLOATING_TASK_COMPARATOR
        List<TestIndexedItem<FloatingTask>> expected = new TestIndexedItemListBuilder<FloatingTask>()
                                                        .add(2, tpflt.buyAHelicopter)
                                                        .add(1, tpflt.readABook)
                                                        .build();
        assertEquals(expected, model.getFloatingTaskList());
        // Task selection is on the most recently added task
        assertEquals(Optional.of(new TaskSelect(TaskType.FLOAT, 2)), model.getTaskSelect());
    }

```
###### src/test/java/seedu/address/model/ModelTest.java

``` java
    @Test
    public void removeFloatingTask_emptiesIndexInFilteredList() throws Exception {
        assertEquals(1, model.addFloatingTask(tpflt.readABook));
        assertEquals(2, model.addFloatingTask(tpflt.buyAHelicopter));
        setFloatingTaskPredicate(floatingTask -> floatingTask.equals(tpflt.buyAHelicopter));
        assertEquals(tpflt.buyAHelicopter, model.removeFloatingTask(1));
        model.setTaskPredicate(null);
        assertEquals(Arrays.asList(tpflt.readABook), unindexList(model.getFloatingTaskList()));
    }

```
###### src/test/java/seedu/address/model/ModelTest.java

``` java
    @Test
    public void setFloatingTask_withNewItemThatChangesListPosition_retainsWorkingIndex() throws Exception {
        List<TestIndexedItem<FloatingTask>> expected;
        // We use a comparator that sorts by name only
        model.setFloatingTaskComparator((a, b) -> a.getName().toString().compareTo(b.getName().toString()));
        assertEquals(1, model.addFloatingTask(tpflt.eatAnApple));
        assertEquals(2, model.addFloatingTask(tpflt.readABook));
        expected = new TestIndexedItemListBuilder<FloatingTask>()
                .add(1, tpflt.eatAnApple)
                .add(2, tpflt.readABook)
                .build();
        assertEquals(expected, model.getFloatingTaskList());
        // Now we set item 2 to something that will push it to the top of the list (because of the sorting)
        // However, the working index is still the same.
        model.setFloatingTask(2, tpflt.buyAHelicopter);
        expected = new TestIndexedItemListBuilder<FloatingTask>()
                .add(2, tpflt.buyAHelicopter)
                .add(1, tpflt.eatAnApple)
                .build();
        assertEquals(expected, model.getFloatingTaskList());
        // Task selection is on the most recently edited task
        assertEquals(Optional.of(new TaskSelect(TaskType.FLOAT, 2)), model.getTaskSelect());
    }

    @Test
    public void setFloatingTask_replacesIndexInFilteredList() throws Exception {
        assertEquals(1, model.addFloatingTask(tpflt.readABook));
        assertEquals(2, model.addFloatingTask(tpflt.buyAHelicopter));
        setFloatingTaskPredicate(floatingTask -> floatingTask.equals(tpflt.buyAHelicopter));
        model.setFloatingTask(1, tpflt.readABook);
        model.setTaskPredicate(null);
        assertEquals(Arrays.asList(tpflt.readABook, tpflt.readABook), unindexList(model.getFloatingTaskList()));
    }

```
###### src/test/java/seedu/address/model/ModelTest.java

``` java
    @Test
    public void addEventTask_appendsEventTask() throws Exception {
        assertEquals(1, model.addEventTask(tpent.launchNuclearWeapons));
        assertEquals(tpent.launchNuclearWeapons, model.getEventTask(1));
        assertEquals(2, model.addEventTask(tpent.lunchWithBillGates));
        // Given the corresponding working indexes, getEventTask() returns the tasks we expect.
        assertEquals(tpent.launchNuclearWeapons, model.getEventTask(1));
        assertEquals(tpent.lunchWithBillGates, model.getEventTask(2));
        // However, their actual position in the list depends on DEFAULT_EVENT_TASK_COMPARATOR
        List<TestIndexedItem<EventTask>> expected = new TestIndexedItemListBuilder<EventTask>()
                .add(2, tpent.lunchWithBillGates)
                .add(1, tpent.launchNuclearWeapons)
                .build();
        assertEquals(expected, model.getEventTaskList());
        // Task selection is on the most recently added task
        assertEquals(Optional.of(new TaskSelect(TaskType.EVENT, 2)), model.getTaskSelect());
    }

    @Test
    public void getEventTask_invalidIndex_throwsException() throws Exception {
        thrown.expect(IllegalValueException.class);
        model.getEventTask(1);
    }

    @Test
    public void removeEventTask_removesIndexInFilteredList() throws Exception {
        model.addEventTask(tpent.lunchWithBillGates);
        model.addEventTask(tpent.launchNuclearWeapons);
        setEventTaskPredicate(eventTask -> eventTask.equals(tpent.launchNuclearWeapons));
        assertEquals(tpent.launchNuclearWeapons, model.removeEventTask(1));
        model.setTaskPredicate(null);
        assertEquals(Arrays.asList(tpent.lunchWithBillGates), unindexList(model.getEventTaskList()));
    }

    @Test
    public void removeEventTask_invalidIndex_throwsException() throws Exception {
        thrown.expect(IllegalValueException.class);
        model.removeEventTask(1);
    }

    @Test
    public void setEventTask_withNewItemThatChangesListPosition_retainsWorkingIndex() throws Exception {
        List<TestIndexedItem<EventTask>> expected;
        // We use a comparator that sorts by name only
        model.setEventTaskComparator((a, b) -> a.getName().toString().compareTo(b.getName().toString()));
        assertEquals(1, model.addEventTask(tpent.launchNuclearWeapons));
        assertEquals(2, model.addEventTask(tpent.lunchWithBillGates));
        expected = new TestIndexedItemListBuilder<EventTask>()
                .add(1, tpent.launchNuclearWeapons)
                .add(2, tpent.lunchWithBillGates)
                .build();
        assertEquals(expected, model.getEventTaskList());
        // Now we set item 2 to something that will push it to the top of the list (because of the sorting)
        // However, the working index is still the same.
        model.setEventTask(2, tpent.doHomework);
        expected = new TestIndexedItemListBuilder<EventTask>()
                .add(2, tpent.doHomework)
                .add(1, tpent.launchNuclearWeapons)
                .build();
        assertEquals(expected, model.getEventTaskList());
        // Task selection is on the edited task
        assertEquals(Optional.of(new TaskSelect(TaskType.EVENT, 2)), model.getTaskSelect());
    }

    @Test
    public void setEventTask_replacesIndexInFilteredList() throws Exception {
        assertEquals(1, model.addEventTask(tpent.lunchWithBillGates));
        assertEquals(2, model.addEventTask(tpent.launchNuclearWeapons));
        setEventTaskPredicate(eventTask -> eventTask.equals(tpent.launchNuclearWeapons));
        model.setEventTask(1, tpent.lunchWithBillGates);
        model.setTaskPredicate(null);
        assertEquals(Arrays.asList(tpent.lunchWithBillGates, tpent.lunchWithBillGates),
                    unindexList(model.getEventTaskList()));
    }

    @Test
    public void setEventTask_invalidIndex_throwsException() throws Exception {
        thrown.expect(IllegalValueException.class);
        model.setEventTask(1, tpent.lunchWithBillGates);
    }

    @Test
    public void addDeadlineTask_appendsDeadlineTask() throws Exception {
        assertEquals(1, model.addDeadlineTask(tpdue.assembleTheMissiles));
        assertEquals(tpdue.assembleTheMissiles, model.getDeadlineTask(1));
        assertEquals(2, model.addDeadlineTask(tpdue.speechTranscript));
        // Given their corresponding working indexes, getDeadlineTask() returns the tasks we expect.
        assertEquals(tpdue.assembleTheMissiles, model.getDeadlineTask(1));
        assertEquals(tpdue.speechTranscript, model.getDeadlineTask(2));
        // However, their actual position in the list depends on DEFAULT_DEADLINE_TASK_COMPARATOR
        List<TestIndexedItem<DeadlineTask>> expected = new TestIndexedItemListBuilder<DeadlineTask>()
                .add(2, tpdue.speechTranscript)
                .add(1, tpdue.assembleTheMissiles)
                .build();
        assertEquals(expected, model.getDeadlineTaskList());
    }

```
###### src/test/java/seedu/address/model/ModelTest.java

``` java
    @Test
    public void removeDeadlineTask_removesIndexInFilteredList() throws Exception {
        assertEquals(1, model.addDeadlineTask(tpdue.speechTranscript));
        assertEquals(2, model.addDeadlineTask(tpdue.assembleTheMissiles));
        setDeadlineTaskPredicate(task -> task.equals(tpdue.assembleTheMissiles));
        assertEquals(tpdue.assembleTheMissiles, model.removeDeadlineTask(1));
        model.setTaskPredicate(null);
        assertEquals(Arrays.asList(tpdue.speechTranscript), unindexList(model.getDeadlineTaskList()));
    }

```
###### src/test/java/seedu/address/model/ModelTest.java

``` java
    @Test
    public void setDeadlineTask_withNewItemThatChangesListPosition_retainsWorkingIndex() throws Exception {
        List<TestIndexedItem<DeadlineTask>> expected;
        // We use a comparator that sorts by name only
        model.setDeadlineTaskComparator((a, b) -> a.getName().toString().compareTo(b.getName().toString()));
        assertEquals(1, model.addDeadlineTask(tpdue.completeHomework));
        assertEquals(2, model.addDeadlineTask(tpdue.speechTranscript));
        expected = new TestIndexedItemListBuilder<DeadlineTask>()
                .add(1, tpdue.completeHomework)
                .add(2, tpdue.speechTranscript)
                .build();
        assertEquals(expected, model.getDeadlineTaskList());
        // Now we set item 2 to something that will push it to the top of the list (because of the sorting)
        // However, the working index is still the same.
        model.setDeadlineTask(2, tpdue.assembleTheMissiles);
        expected = new TestIndexedItemListBuilder<DeadlineTask>()
                .add(2, tpdue.assembleTheMissiles)
                .add(1, tpdue.completeHomework)
                .build();
        assertEquals(expected, model.getDeadlineTaskList());
        // Task selection is on the edited task
        assertEquals(Optional.of(new TaskSelect(TaskType.DEADLINE, 2)), model.getTaskSelect());
    }

    @Test
    public void setDeadlineTask_replacesIndexInFilteredList() throws Exception {
        assertEquals(1, model.addDeadlineTask(tpdue.speechTranscript));
        assertEquals(2, model.addDeadlineTask(tpdue.assembleTheMissiles));
        setDeadlineTaskPredicate(task -> task.equals(tpdue.assembleTheMissiles));
        model.setDeadlineTask(1, tpdue.speechTranscript);
        model.setTaskPredicate(null);
        assertEquals(Arrays.asList(tpdue.speechTranscript, tpdue.speechTranscript),
                unindexList(model.getDeadlineTaskList()));
    }

```
###### src/test/java/seedu/address/model/ModelTest.java

``` java
    @Test
    public void undoRedo_restoresWorkingIndexes() throws Exception {
        List<TestIndexedItem<FloatingTask>> expected1, expected2;
        model.setFloatingTaskComparator((a, b) -> a.getName().toString().compareTo(b.getName().toString()));
        assertEquals(1, model.addFloatingTask(tpflt.readABook));
        assertEquals(2, model.addFloatingTask(tpflt.eatAnApple));
        expected1 = new TestIndexedItemListBuilder<FloatingTask>()
                .add(2, tpflt.eatAnApple)
                .add(1, tpflt.readABook)
                .build();
        assertEquals(expected1, model.getFloatingTaskList());
        model.recordState("add two tasks");

        model.setFloatingTask(1, tpflt.buyAHelicopter);
        expected2 = new TestIndexedItemListBuilder<FloatingTask>()
                                                        .add(1, tpflt.buyAHelicopter)
                                                        .add(2, tpflt.eatAnApple)
                                                        .build();
        assertEquals(expected2, model.getFloatingTaskList());
        model.recordState("edit a task");

        model.undo();
        assertEquals(expected1, model.getFloatingTaskList());

        model.redo();
        assertEquals(expected2, model.getFloatingTaskList());
    }

    @Test
    public void hasUncommittedChanges_withModifiedConfig_returnsTrue() {
        model.setTaskBookFilePath("a");
        assertTrue(model.hasUncommittedChanges());
    }

    @Test
    public void undoRedo_withModifiedConfig_restoresConfig() throws Exception {
        model.setTaskBookFilePath("a");
        model.recordState("modified config");
        model.undo();
        assertEquals("data/taskbook.json", model.getTaskBookFilePath());
        model.redo();
        assertEquals("a", model.getTaskBookFilePath());
    }

    @Test
    public void hasUncommittedChanges_withModifiedTaskSelect_returnsFalse() {
        // Task selection is not counted as something that deserves a commit
        model.setTaskSelect(Optional.of(new TaskSelect(TaskType.EVENT, 1)));
        assertFalse(model.hasUncommittedChanges());
    }

    @Test
    public void undoRedo_withModifiedTaskSelect_restoresTaskSelect() throws Exception {
        model.setTaskSelect(Optional.of(new TaskSelect(TaskType.EVENT, 1)));
        model.recordState("modified task select");
        model.undo();
        assertEquals(Optional.empty(), model.getTaskSelect());
        model.redo();
        assertEquals(Optional.of(new TaskSelect(TaskType.EVENT, 1)), model.getTaskSelect());
    }

    private <E> List<E> unindexList(List<IndexedItem<E>> list) {
        return list.stream().map(x -> x.getItem()).collect(Collectors.toList());
    }

    private void setFloatingTaskPredicate(final Predicate<FloatingTask> predicate) {
        model.setTaskPredicate(new FalseTaskPredicate() {
            @Override
            public boolean test(FloatingTask floatingTask) {
                return predicate.test(floatingTask);
            }
        });
    }

    private void setDeadlineTaskPredicate(final Predicate<DeadlineTask> predicate) {
        model.setTaskPredicate(new FalseTaskPredicate() {
            @Override
            public boolean test(DeadlineTask deadlineTask) {
                return predicate.test(deadlineTask);
            }
        });
    }

    private void setEventTaskPredicate(final Predicate<EventTask> predicate) {
        model.setTaskPredicate(new FalseTaskPredicate() {
            @Override
            public boolean test(EventTask eventTask) {
                return predicate.test(eventTask);
            }
        });
    }
}
```
###### src/test/java/seedu/address/model/TaskBookTest.java

``` java
    @Test
    public void setEventTasks() {
        taskBook.setEventTasks(typicalEventTasks.getEventTasks());
        assertEquals(typicalEventTasks.getEventTasks(), taskBook.getEventTasks());
    }

    @Test
    public void addEventTask_appendsToList() {
        final ArrayList<EventTask> expected = new ArrayList<>();
        taskBook.addEventTask(typicalEventTasks.lunchWithBillGates);
        expected.add(typicalEventTasks.lunchWithBillGates);
        assertEquals(expected, taskBook.getEventTasks());
        taskBook.addEventTask(typicalEventTasks.launchNuclearWeapons);
        expected.add(typicalEventTasks.launchNuclearWeapons);
        assertEquals(expected, taskBook.getEventTasks());
    }

    @Test
    public void removeEventTask_removesFromList() {
        final ArrayList<EventTask> expected = new ArrayList<>(typicalEventTasks.getEventTasks());
        expected.remove(0);
        taskBook.setEventTasks(typicalEventTasks.getEventTasks());
        taskBook.removeEventTask(0);
        assertEquals(expected, taskBook.getEventTasks());
    }

```
###### src/test/java/seedu/address/model/TestIndexedItemListBuilder.java

``` java
/**
 * A builder for a list of {@link TestIndexedItem}
 */
public class TestIndexedItemListBuilder<E> {
    private final ArrayList<TestIndexedItem<E>> list = new ArrayList<>();

    public TestIndexedItemListBuilder<E> add(int workingIndex, E item) {
        list.add(new TestIndexedItem<>(workingIndex, item));
        return this;
    }

    public List<TestIndexedItem<E>> build() {
        return new ArrayList<>(list);
    }
}
```
###### src/test/java/seedu/address/model/task/EventTaskTest.java

``` java
public class EventTaskTest {

    private EventTask eventTask;

    @Before
    public void setupEventTask() throws Exception {
        final Name name = new Name("Event Task Name");
        final LocalDateTime start = UNIX_EPOCH;
        final LocalDateTime end = UNIX_EPOCH.plusHours(1);
        final LocalDateTimeDuration duration = new LocalDateTimeDuration(start, end);
        eventTask = new EventTask(name, duration);
    }

    @Test
    public void getDuration_returnsDuration() throws Exception {
        final LocalDateTimeDuration expected = new LocalDateTimeDuration(UNIX_EPOCH, UNIX_EPOCH.plusHours(1));
        final LocalDateTimeDuration actual = eventTask.getDuration();
        assertEquals(expected, actual);
    }

    @Test
    public void getStart_returnsStart() throws Exception {
        final LocalDateTime expected = UNIX_EPOCH;
        final LocalDateTime actual = eventTask.getStart();
        assertEquals(expected, actual);
    }

    @Test
    public void getEnd_returnsEnd() throws Exception {
        final LocalDateTime expected = UNIX_EPOCH.plusHours(1);
        final LocalDateTime actual = eventTask.getEnd();
        assertEquals(expected, actual);
    }

    @Test
    public void equals_isEqual_returnsTrue() throws Exception {
        final EventTask other = new EventTask("Event Task Name", UNIX_EPOCH, UNIX_EPOCH.plusHours(1));
        assertTrue(eventTask.equals(other));
        assertTrue(eventTask.hashCode() == other.hashCode());
    }

    @Test
    public void equals_notEqual_returnsFalse() throws Exception {
        final EventTask other = new EventTask(new Name("Event Task Name"), UNIX_EPOCH, UNIX_EPOCH.plusHours(2));
        assertFalse(eventTask.equals(other));
        assertFalse(eventTask.hashCode() == other.hashCode());
    }

    @Test
    public void toString_returnsCorrectFormat() {
        final String expected = "EventTask[name=Event Task Name, "
                                + "duration=LocalDateTimeDuration[start=1970-01-01T00:00, "
                                + "end=1970-01-01T01:00]]";
        final String actual = eventTask.toString();
        assertEquals(expected, actual);
    }

}
```
###### src/test/java/seedu/address/model/task/TypicalEventTasks.java

``` java
public class TypicalEventTasks {

    public final EventTask lunchWithBillGates;
    public final EventTask launchNuclearWeapons;
    public final EventTask doHomework;

    public TypicalEventTasks() {
        try {
            lunchWithBillGates = new EventTask("Lunch with Bill Gates", UNIX_EPOCH, UNIX_EPOCH.plusHours(1));
            launchNuclearWeapons = new EventTask("Launch nuclear weapons", UNIX_EPOCH.plusHours(1),
                                                 UNIX_EPOCH.plusHours(2));
            doHomework = new EventTask("Do homework", UNIX_EPOCH.plusHours(3), UNIX_EPOCH.plusHours(4));
        } catch (IllegalValueException e) {
            throw new AssertionError("this should not happen", e);
        }
    }

    public List<EventTask> getEventTasks() {
        final EventTask[] tasks = {lunchWithBillGates, launchNuclearWeapons, doHomework};
        return Arrays.asList(tasks);
    }

}
```
###### src/test/java/seedu/address/model/TaskBookBuilder.java

``` java
/**
 * Exposes a fluent API for building a {@link TaskBook} for use in tests.
 */
public class TaskBookBuilder {

    private TaskBook taskBook;

    private final LocalDateTime referenceDateTime;

    public TaskBookBuilder() {
        this.taskBook = new TaskBook();
        this.referenceDateTime = UNIX_EPOCH.plusHours(1);
    }

    public TaskBookBuilder(ReadOnlyTaskBook taskBook) {
        this.taskBook = new TaskBook(taskBook);
        this.referenceDateTime = UNIX_EPOCH.plusHours(1);
    }

    /**
     * Adds a {@link FloatingTask} to the task book.
     */
    public TaskBookBuilder addFloatingTask(FloatingTask floatingTask) {
        taskBook.addFloatingTask(floatingTask);
        return this;
    }

    /**
     * @see #addFloatingTask(FloatingTask)
     */
    public TaskBookBuilder addFloatingTask(String name, int priority) {
        try {
            addFloatingTask(new FloatingTask(new Name(name), new Priority(Integer.toString(priority))));
            return this;
        } catch (IllegalValueException e) {
            throw new RuntimeException(e);
        }
    }

    /**
     * Adds a list of {@link FloatingTask} to the task book.
     */
    public TaskBookBuilder addFloatingTasks(Iterable<FloatingTask> floatingTasks) {
        for (FloatingTask floatingTask : floatingTasks) {
            addFloatingTask(floatingTask);
        }
        return this;
    }

    /**
     * Adds a list of typical floating tasks to the task book.
     * @see TypicalFloatingTasks
     */
    public TaskBookBuilder addTypicalFloatingTasks() {
        final TypicalFloatingTasks tft = new TypicalFloatingTasks();
        return addFloatingTasks(tft.getFloatingTasks());
    }

```
###### src/test/java/seedu/address/model/TaskBookBuilder.java

``` java
    /**
     * Adds a {@link DeadlineTask} to the task book.
     */
    public TaskBookBuilder addDeadlineTask(DeadlineTask deadlineTask) {
        taskBook.addDeadlineTask(deadlineTask);
        return this;
    }

    /**
     * @see #addDeadlineTask(DeadlineTask)
     */
    public TaskBookBuilder addDeadlineTask(String name, LocalDateTime due, boolean finished) {
        try {
            addDeadlineTask(new DeadlineTask(new Name(name), due, finished));
            return this;
        } catch (IllegalValueException e) {
            throw new RuntimeException(e);
        }
    }

    /**
     * @see #addDeadlineTask(String, LocalDateTime, boolean)
     */
    public TaskBookBuilder addDeadlineTask(String name, LocalDateTime due) {
        return addDeadlineTask(name, due, false);
    }

    /**
     * Adds a list of {@link DeadlineTask} to the task book.
     */
    public TaskBookBuilder addDeadlineTasks(Iterable<DeadlineTask> deadlineTasks) {
        for (DeadlineTask deadlineTask : deadlineTasks) {
            addDeadlineTask(deadlineTask);
        }
        return this;
    }

    /**
     * Adds a list of typical deadline tasks to the task book.
     */
    public TaskBookBuilder addTypicalDeadlineTasks() {
        final TypicalDeadlineTasks tdt = new TypicalDeadlineTasks();
        return addDeadlineTasks(tdt.getDeadlineTasks());
    }

```
###### src/test/java/seedu/address/model/TaskBookBuilder.java

``` java
    /**
     * Adds a {@link EventTask} to the task book.
     */
    public TaskBookBuilder addEventTask(EventTask eventTask) {
        taskBook.addEventTask(eventTask);
        return this;
    }

    /**
     * @see #addEventTask(EventTask)
     */
    public TaskBookBuilder addEventTask(String name, LocalDateTime start, LocalDateTime end) {
        try {
            addEventTask(new EventTask(name, start, end));
            return this;
        } catch (IllegalValueException e) {
            throw new RuntimeException(e);
        }
    }

    /**
     * Adds a list of {@link EventTask} to the task book.
     */
    public TaskBookBuilder addEventTasks(Iterable<EventTask> eventTasks) {
        for (EventTask eventTask : eventTasks) {
            addEventTask(eventTask);
        }
        return this;
    }

    /**
     * Adds a list of typical event tasks to the task book.
     * @see TypicalEventTasks
     */
    public TaskBookBuilder addTypicalEventTasks() {
        final TypicalEventTasks tet = new TypicalEventTasks();
        return addEventTasks(tet.getEventTasks());
    }

```
###### src/test/java/seedu/address/model/TaskBookBuilder.java

``` java
    /**
     * Adds a list of typical floating, deadline and event tasks to the task book.
     */
    public TaskBookBuilder addTypicalTasks() {
        addTypicalFloatingTasks();
        addTypicalDeadlineTasks();
        addTypicalEventTasks();
        return this;
    }

```
###### src/test/java/seedu/address/model/TaskBookBuilder.java

``` java
    /**
     * Returns the built {@link TaskBook}
     */
    public TaskBook build() {
        return taskBook;
    }

}
```
###### src/test/java/seedu/address/ui/FloatingTaskListPaneTest.java

``` java
@Category({GuiTests.class})
public class FloatingTaskListPaneTest extends FxRobot {

    private final ModelManager model = new ModelManager(new Config(),
                                                        new TaskBookBuilder().addTypicalFloatingTasks().build());

    private FloatingTaskListPane pane;

    private ListView<IndexedItem<FloatingTask>> listView;

    @BeforeClass
    public static void setupFxToolkit() throws Exception {
        FxToolkit.registerPrimaryStage();
    }

    @Before
    public void setup() throws Exception {
        FxToolkit.setupSceneRoot(() -> {
            pane = new FloatingTaskListPane(model);
            return pane.getRoot();
        });
        FxToolkit.showStage();
        listView = lookup(".list-view").query();
    }

    @After
    public void teardown() throws Exception {
        FxToolkit.cleanupStages();
    }

    @Test
    public void select_selectsCorrectIndex() {
        interact(() -> pane.select(2));
        assertEquals(1, listView.getSelectionModel().getSelectedIndex());
    }

    @Test
    public void clearSelect() {
        interact(() -> listView.getSelectionModel().select(0));
        assertEquals(0, listView.getSelectionModel().getSelectedIndex());
        interact(() -> pane.clearSelect());
        assertEquals(-1, listView.getSelectionModel().getSelectedIndex());
    }

}
```
###### src/test/java/seedu/address/ui/DeadlineTaskListPaneTest.java

``` java
@Category({GuiTests.class})
public class DeadlineTaskListPaneTest extends FxRobot {

    private final ModelManager model = new ModelManager(new Config(),
                                                        new TaskBookBuilder().addTypicalDeadlineTasks().build());

    private DeadlineTaskListPane pane;

    private ListView<IndexedItem<DeadlineTask>> listView;

    @BeforeClass
    public static void setupFxToolkit() throws Exception {
        FxToolkit.registerPrimaryStage();
    }

    @Before
    public void setup() throws Exception {
        FxToolkit.setupSceneRoot(() -> {
            pane = new DeadlineTaskListPane(model);
            return pane.getRoot();
        });
        FxToolkit.showStage();
        listView = lookup(".list-view").query();
    }

    @After
    public void teardown() throws Exception {
        FxToolkit.cleanupStages();
    }

    @Test
    public void select_selectsCorrectIndex() {
        interact(() -> pane.select(2));
        assertEquals(1, listView.getSelectionModel().getSelectedIndex());
    }

    @Test
    public void clearSelect() {
        interact(() -> listView.getSelectionModel().select(0));
        assertEquals(0, listView.getSelectionModel().getSelectedIndex());
        interact(() -> pane.clearSelect());
        assertEquals(-1, listView.getSelectionModel().getSelectedIndex());
    }

}
```
###### src/test/java/seedu/address/ui/UiManagerTest.java

``` java
@Category({GuiTests.class})
public class UiManagerTest extends FxRobot {

    private Config config;

    private ModelManager model = new ModelManager();

    @Mock
    private Logic logic;

    private UiManager uiManager;

    private Stage primaryStage;

    @BeforeClass
    public static void setupFxToolkit() throws Exception {
        FxToolkit.registerPrimaryStage();
    }

    @Before
    public void setup() throws Exception {
        MockitoAnnotations.initMocks(this);
        Mockito.when(logic.getModel())
                .thenReturn(model);
        config = new Config();
        uiManager = new UiManager(logic, config);
        FxToolkit.setupStage(stage -> {
            this.primaryStage = stage;
            uiManager.start(stage);
        });
        FxToolkit.showStage();
    }

    @After
    public void teardown() throws Exception {
        Platform.setImplicitExit(false);
        interact(() -> uiManager.stop());
        FxToolkit.cleanupStages();
    }

    @Test
    public void startStop_works() {
    }

    @Test
    public void hide_hidesThePrimaryStage() {
        interact(() -> uiManager.hide());
        assertFalse(primaryStage.isShowing());
    }

    @Test
    public void show_showsThePrimaryStage() {
        interact(() -> uiManager.show());
        assertTrue(primaryStage.isShowing());
    }

    @Test
    public void hideShow_restoresWindowDimensions() {
        final double expectedWidth = primaryStage.getWidth();
        final double expectedHeight = primaryStage.getHeight();
        interact(() -> uiManager.hide());
        interact(() -> uiManager.show());
        assertEquals(expectedWidth, primaryStage.getWidth(), 0.0);
        assertEquals(expectedHeight, primaryStage.getHeight(), 0.0);
    }

    @Test
    public void toggleHide_whenPrimaryStageIsShowing_hidesPrimaryStage() {
        interact(() -> uiManager.toggleHide());
        assertFalse(primaryStage.isShowing());
    }

    @Test
    public void toggleHide_whenPrimaryStageIsNotShowing_showsPrimaryStage() {
        interact(() -> primaryStage.hide());
        assertFalse(primaryStage.isShowing());
        interact(() -> uiManager.toggleHide());
        assertTrue(primaryStage.isShowing());
    }

}
```
###### src/test/java/seedu/address/ui/EventTaskListCardTest.java

``` java
@Category({GuiTests.class})
public class EventTaskListCardTest extends FxRobot {

    private TypicalEventTasks tet = new TypicalEventTasks();

    private EventTaskListCard eventTaskListCard;

    private Label indexLabel;

    private Label nameLabel;

    private Label startLabel;

    private Label endLabel;

    @BeforeClass
    public static void setupFxToolkit() throws Exception {
        FxToolkit.registerPrimaryStage();
    }

    private void setupNodes() throws Exception {
        FxToolkit.showStage();
        indexLabel = lookup("#indexLabel").query();
        nameLabel = lookup("#nameLabel").query();
        startLabel = lookup("#startLabel").query();
        endLabel = lookup("#endLabel").query();
    }

    @Test
    public void withEventTask_showsInfoInLabels() throws Exception {
        FxToolkit.setupSceneRoot(() -> {
            eventTaskListCard = new EventTaskListCard(tet.lunchWithBillGates, 42);
            return eventTaskListCard.getRoot();
        });
        setupNodes();
        assertEquals("e42. ", indexLabel.getText());
        assertEquals("Lunch with Bill Gates", nameLabel.getText());
        assertEquals("01/01/1970 Time: 00:00", startLabel.getText());
        assertEquals("01/01/1970 Time: 01:00", endLabel.getText());
    }

    @Test
    public void nullEventTask_becomesInvisible() throws Exception {
        FxToolkit.setupSceneRoot(() -> {
            eventTaskListCard = new EventTaskListCard(null, 34);
            return eventTaskListCard.getRoot();
        });
        setupNodes();
        assertFalse(eventTaskListCard.getRoot().isVisible());
    }

}
```
###### src/test/java/seedu/address/ui/ResultDisplayTest.java

``` java
@Category({GuiTests.class})
public class ResultDisplayTest extends GuiTest {

    private ResultDisplay resultDisplay;

    private TextArea textArea;

    @Override
    protected Parent getRootNode() {
        resultDisplay = new ResultDisplay();
        return resultDisplay.getRoot();
    }

    @Before
    public void setupNodes() {
        textArea = find("#resultDisplay");
    }

    @Test
    public void constructor() {
        assertEquals("", textArea.getText());
    }

    @Test
    public void postMessage_setsMessage() {
        resultDisplay.postMessage("test message");
        assertEquals("test message", textArea.getText());
    }

}
```
###### src/test/java/seedu/address/ui/StatusBarFooterTest.java

``` java
@Category({GuiTests.class})
public class StatusBarFooterTest extends GuiTest {

    private Model model = new ModelManager();

    private StatusBarFooter statusBarFooter;

    private StatusBar taskCounter;

    private StatusBar syncStatus;

    private StatusBar saveLocationStatus;

    @Override
    protected Parent getRootNode() {
        statusBarFooter = new StatusBarFooter(model);
        return statusBarFooter.getRoot();
    }

    @Before
    public void setupNodes() {
        taskCounter = find("#taskCounter");
        syncStatus = find("#syncStatus");
        saveLocationStatus = find("#saveLocationStatus");
    }

    @Test
    public void constructor() {
        assertEquals("Total number of tasks in Task Tracker: 0", taskCounter.getText());
        assertEquals("Not updated yet in this session", syncStatus.getText());
        assertEquals("data/taskbook.json", saveLocationStatus.getText());
    }

}
```
###### src/test/java/seedu/address/ui/UiRegionTest.java

``` java
@Category({GuiTests.class})
public class UiRegionTest extends GuiTest {

    private UiRegion uiRegion;

    @Override
    protected Parent getRootNode() {
        uiRegion = new UiRegion();
        return uiRegion;
    }

    @Test
    public void constructor() {
        assertEquals(Collections.emptyList(), uiRegion.getChildrenUnmodifiable());
    }

    @Test
    public void setNode_addsOrReplacesChild() {
        final Region node1 = new Region();
        interact(() -> uiRegion.setNode(node1));
        assertEquals(node1, uiRegion.getNode());
        assertEquals(Arrays.asList(node1), uiRegion.getChildrenUnmodifiable());
        final Region node2 = new Region();
        interact(() -> uiRegion.setNode(node2));
        assertEquals(node2, uiRegion.getNode());
        assertEquals(Arrays.asList(node2), uiRegion.getChildrenUnmodifiable());
    }

}
```
###### src/test/java/seedu/address/ui/EventTaskListPaneTest.java

``` java
@Category({GuiTests.class})
public class EventTaskListPaneTest extends FxRobot {

    private final ModelManager model = new ModelManager(new Config(),
                                                        new TaskBookBuilder().addTypicalEventTasks()
                                                            .build());

    private EventTaskListPane pane;

    private ListView<IndexedItem<EventTask>> listView;

    @BeforeClass
    public static void setupFxToolkit() throws Exception {
        FxToolkit.registerPrimaryStage();
    }

    @Before
    public void setup() throws Exception {
        FxToolkit.setupSceneRoot(() -> {
            pane = new EventTaskListPane(model);
            return pane.getRoot();
        });
        FxToolkit.showStage();
        listView = lookup(".list-view").query();
    }

    @After
    public void teardown() throws Exception {
        FxToolkit.cleanupStages();
    }

    @Test
    public void select_selectsCorrectIndex() {
        interact(() -> pane.select(2));
        assertEquals(1, listView.getSelectionModel().getSelectedIndex());
    }

    @Test
    public void clearSelect() {
        interact(() -> listView.getSelectionModel().select(0));
        assertEquals(0, listView.getSelectionModel().getSelectedIndex());
        interact(() -> pane.clearSelect());
        assertEquals(-1, listView.getSelectionModel().getSelectedIndex());
    }

}
```
###### src/test/java/seedu/address/ui/CommandBoxTest.java

``` java
/**
 * Unit Tests for CommandBox.
 */
@Category({GuiTests.class})
public class CommandBoxTest extends FxRobot {

    @Mock
    private Logic logic;

    @Mock
    private ResultDisplay resultDisplay;

    private CommandBox commandBox;

    private InlineCssTextArea textField;

    @BeforeClass
    public static void setupFxToolkit() throws Exception {
        FxToolkit.registerPrimaryStage();
    }

    @Before
    public void setup() throws Exception {
        MockitoAnnotations.initMocks(this);
        FxToolkit.setupSceneRoot(() -> {
            commandBox = new CommandBox(resultDisplay, logic);
            return commandBox.getRoot();
        });
        FxToolkit.showStage();
        textField = lookup("#commandTextField").query();
    }

    @After
    public void teardown() throws Exception {
        FxToolkit.cleanupStages();
    }

    @Test
    public void pressEnter_callsLogicExecute() throws ParseException, CommandException, IOException {
        final String inputCommand = "some command";
        final CommandResult result = new CommandResult("some result");
        Mockito.when(logic.execute(inputCommand)).thenReturn(result);

        interact(() -> textField.replaceText(inputCommand));
        clickOn(textField).push(KeyCode.ENTER);

        Mockito.verify(logic).execute(inputCommand);
        Mockito.verify(resultDisplay).postMessage(result.feedbackToUser);
        assertEquals("", textField.getText());
    }

    @Test
    public void pressEnter_withIncorrectCommand_keepsCommandText() throws ParseException, CommandException, IOException {
        final String inputCommand = "some command";
        Mockito.when(logic.execute(inputCommand)).thenThrow(new CommandException("some exception"));

        interact(() -> textField.replaceText(inputCommand));
        clickOn(textField).push(KeyCode.ENTER);
        assertEquals(inputCommand, textField.getText());
        assertTrue(textField.getStyleClass().contains("error"));

        // Pressing any key will clear the error style
        clickOn(textField).push(KeyCode.RIGHT);
        assertFalse(textField.getStyleClass().contains("error"));
    }

    @Test
    public void pressTab_withMultipleAutocomplete_showsAutocompleteBox()
            throws ParseException, CommandException, IOException {
        final List<String> autocomplete = Arrays.asList(" wonderful", " fantastic");
        final String inputCommand = "some command";
        Mockito.when(logic.autocomplete("some command", 4)).thenReturn(autocomplete);
        interact(() -> textField.replaceText(inputCommand));
        interact(() -> textField.selectRange(4, 4));
        push(KeyCode.TAB);
        assertTrue(lookup(".list-view").tryQuery().isPresent());
        final ListView<String> listView = lookup(".list-view").query();
        assertTrue(listView.getScene().getWindow().isShowing());
        assertEquals(autocomplete, listView.getItems());
        assertEquals(0, listView.getSelectionModel().getSelectedIndex());

        // Pressing tab when the listview is focussed will scroll the focus
        push(KeyCode.TAB);
        assertEquals(1, listView.getSelectionModel().getSelectedIndex());

        // And when we reach the end we wrap back to the top
        push(KeyCode.TAB);
        assertEquals(0, listView.getSelectionModel().getSelectedIndex());

        // Pressing enter will insert the selected text
        push(KeyCode.ENTER);
        assertEquals("some wonderful command", textField.getText());
        assertEquals(14, textField.getCaretPosition());
        assertFalse(listView.getScene().getWindow().isShowing());
    }

    @Test
    public void pressTab_withOneAutocomplete_insertsAutocompleteDirectly()
            throws ParseException, CommandException, IOException {
        final List<String> autocomplete = Arrays.asList(" wonderful");
        final String inputCommand = "some command";
        Mockito.when(logic.autocomplete("some command", 4)).thenReturn(autocomplete);
        interact(() -> textField.replaceText(inputCommand));
        interact(() -> textField.selectRange(4, 4));
        push(KeyCode.TAB);
        assertEquals("some wonderful command", textField.getText());
        assertEquals(14, textField.getCaretPosition());
    }

}
```
###### src/test/java/seedu/address/ui/HelpWindowTest.java

``` java
@Category({GuiTests.class})
public class HelpWindowTest extends FxRobot {

    private HelpWindow helpWindow;
    private WebView webView;

    @BeforeClass
    public static void setupFxToolkit() throws Exception {
        FxToolkit.registerPrimaryStage();
    }

    @Before
    public void setupHelpWindow() throws Exception {
        FxToolkit.registerStage(() -> {
            helpWindow = new HelpWindow();
            return helpWindow.getStage();
        });
        FxToolkit.showStage();
    }

    @After
    public void teardownHelpWindow() throws Exception {
        FxToolkit.cleanupStages();
    }

```
###### src/test/java/seedu/address/ui/DeadlineTaskListCardTest.java

``` java
@Category({GuiTests.class})
public class DeadlineTaskListCardTest extends FxRobot {

    private TypicalDeadlineTasks tdt = new TypicalDeadlineTasks();

    private DeadlineTaskListCard deadlineTaskListCard;

    private Label indexLabel;

    private Label nameLabel;

    private Label dueLabel;

    @BeforeClass
    public static void setupFxToolkit() throws Exception {
        FxToolkit.registerPrimaryStage();
    }

    private void setupNodes() throws Exception {
        FxToolkit.showStage();
        indexLabel = lookup("#indexLabel").query();
        nameLabel = lookup("#nameLabel").query();
        dueLabel = lookup("#dueLabel").query();
    }

    @Test
    public void withDeadlineTask_showsInfoInLabels() throws Exception {
        FxToolkit.setupSceneRoot(() -> {
            deadlineTaskListCard = new DeadlineTaskListCard(tdt.speechTranscript, 42);
            return deadlineTaskListCard.getRoot();
        });
        setupNodes();
        assertEquals("d42. ", indexLabel.getText());
        assertEquals("Speech Transcript", nameLabel.getText());
        assertEquals("01/01/1970 Time: 01:00", dueLabel.getText());
    }

    @Test
    public void nullDeadlineTask_becomesInvisible() throws Exception {
        FxToolkit.setupSceneRoot(() -> {
            deadlineTaskListCard = new DeadlineTaskListCard(null, 34);
            return deadlineTaskListCard.getRoot();
        });
        setupNodes();
        assertFalse(deadlineTaskListCard.getRoot().isVisible());
    }

}
```
###### src/test/java/seedu/address/ui/FloatingTaskListCardTest.java

``` java
@Category({GuiTests.class})
public class FloatingTaskListCardTest extends FxRobot {

    private TypicalFloatingTasks tft = new TypicalFloatingTasks();

    private FloatingTaskListCard floatingTaskListCard;

    private Label indexLabel;

    private Label nameLabel;

    private Label priorityLabel;

    @BeforeClass
    public static void setupFxToolkit() throws Exception {
        FxToolkit.registerPrimaryStage();
    }

    private void setupNodes() throws Exception {
        FxToolkit.showStage();
        indexLabel = lookup("#indexLabel").query();
        nameLabel = lookup("#nameLabel").query();
        priorityLabel = lookup("#priorityLabel").query();
    }

    @Test
    public void withFloatingTask_displaysInfoInLabels() throws Exception {
        FxToolkit.setupSceneRoot(() -> {
            floatingTaskListCard = new FloatingTaskListCard(tft.buyAHelicopter, 42);
            return floatingTaskListCard.getRoot();
        });
        setupNodes();
        assertEquals("f42. ", indexLabel.getText());
        assertEquals("buy A Helicopter", nameLabel.getText());
        assertEquals("4", priorityLabel.getText());
    }

    @Test
    public void nullFloatingTask_becomesInvisible() throws Exception {
        FxToolkit.setupSceneRoot(() -> {
            floatingTaskListCard = new FloatingTaskListCard(null, 31);
            return floatingTaskListCard.getRoot();
        });
        assertFalse(floatingTaskListCard.getRoot().isVisible());
    }

}
```
###### src/test/java/seedu/address/storage/StorageManagerTest.java

``` java
    @Test
    public void addressBookReadSave() throws Exception {
        final TaskBook original = new TaskBookBuilder().addTypicalTasks().build();
        storageManager.saveTaskBook(original);
        ReadOnlyTaskBook retrieved = storageManager.readTaskBook().get();
        assertEquals(original, new TaskBook(retrieved));
        //More extensive testing of TaskBook saving/reading is done in JsonTaskBookStorageTest
    }

```
###### src/test/java/seedu/address/storage/config/JsonConfigStorageTest.java

``` java
public class JsonConfigStorageTest {

    private Config typicalConfig;

    private JsonFactory jsonFactory;

    private File configFile;

    private JsonConfigStorage configStorage;

    @Rule
    public ExpectedException thrown = ExpectedException.none();

    @Rule
    public TemporaryFolder testFolder = new TemporaryFolder();

    @Before
    public void setup() {
        typicalConfig = new Config();
        typicalConfig.setLogLevel(Level.INFO);
        typicalConfig.setTaskBookFilePath("taskbook.json");
        jsonFactory = new JsonFactory();
        configFile = new File(testFolder.getRoot(), "config.json");
        configStorage = new JsonConfigStorage(configFile.getAbsolutePath());
    }

    @Test
    public void constructor_nullPath_assertionError() {
        thrown.expect(AssertionError.class);
        new JsonConfigStorage(null);
    }

    @Test
    public void getConfigFilePath_returnsConfigFilePath() {
        assertEquals(configFile.getAbsolutePath(), configStorage.getConfigFilePath());
    }

    @Test
    public void readConfig_null_assertionError() throws Exception {
        thrown.expect(AssertionError.class);
        configStorage.readConfig(null);
    }

    @Test
    public void readConfig_missingFile_emptyResult() throws Exception {
        assertFalse(configStorage.readConfig().isPresent());
    }

    @Test
    public void readConfig_notJsonFormat_exceptionThrown() throws Exception {
        FileUtil.writeToFile(configFile, "not json format");
        thrown.expect(DataConversionException.class);
        configStorage.readConfig();
    }

    @Test
    public void readConfig_fileInOrder_successfullyRead() throws Exception {
        final JsonGenerator jgen = jsonFactory.createGenerator(configFile, JsonEncoding.UTF8);
        jgen.writeStartObject();
        jgen.writeObjectField("logLevel", "INFO");
        jgen.writeObjectField("taskBookFilePath", "taskbook.json");
        jgen.writeEndObject();
        jgen.close();
        final ReadOnlyConfig actual = configStorage.readConfig().get();
        assertEquals(typicalConfig, actual);
    }

    @Test
    public void readConfig_valuesMissingFromFile_defaultValuesUsed() throws Exception {
        final JsonGenerator jgen = jsonFactory.createGenerator(configFile, JsonEncoding.UTF8);
        jgen.writeStartObject();
        jgen.writeEndObject();
        jgen.close();
        final ReadOnlyConfig actual = configStorage.readConfig().get();
        assertEquals(new Config(), actual);
    }

    @Test
    public void readConfig_extraValuesInFile_extraValuesIgnored() throws Exception {
        final JsonGenerator jgen = jsonFactory.createGenerator(configFile, JsonEncoding.UTF8);
        jgen.writeStartObject();
        jgen.writeObjectField("logLevel", "INFO");
        jgen.writeObjectField("taskBookFilePath", "taskbook.json");
        jgen.writeObjectField("extraField", "extraValue");
        jgen.writeEndObject();
        jgen.close();
        final ReadOnlyConfig actual = configStorage.readConfig().get();
        assertEquals(typicalConfig, actual);
    }

    @Test
    public void saveConfig_nullConfig_assertionFailure() throws Exception {
        thrown.expect(AssertionError.class);
        configStorage.saveConfig(null);
    }

    @Test
    public void saveConfig_nullFile_assertionFailure() throws Exception {
        thrown.expect(AssertionError.class);
        configStorage.saveConfig(typicalConfig, null);
    }

    @Test
    public void saveConfig_allInOrder_success() throws Exception {
        configFile = new File(testFolder.getRoot(), "a/config.json");
        configStorage = new JsonConfigStorage(configFile.getAbsolutePath());

        // Try saving when the file and parent directories do not exist
        configStorage.saveConfig(typicalConfig);
        ReadOnlyConfig readBack = configStorage.readConfig().get();
        assertEquals(typicalConfig, readBack);

        // Try saving when the file exists
        typicalConfig.setLogLevel(Level.FINE);
        configStorage.saveConfig(typicalConfig);
        readBack = configStorage.readConfig().get();
        assertEquals(typicalConfig, readBack);
    }

}
```
###### src/test/java/seedu/address/storage/JsonTaskBookStorageTest.java

``` java
public class JsonTaskBookStorageTest {

    private static String TEST_DATA_FOLDER = FileUtil.getPath("src/test/data/JsonTaskBookStorageTest/");

    @Rule
    public ExpectedException thrown = ExpectedException.none();

    @Rule
    public TemporaryFolder testFolder = new TemporaryFolder();

    private Optional<ReadOnlyTaskBook> readTaskBook(String filePath) throws Exception {
        final JsonTaskBookStorage storage = new JsonTaskBookStorage(filePath);
        return storage.readTaskBook(filePath == null ? null : TEST_DATA_FOLDER + filePath);
    }

    @Test
    public void readTaskBook_nullFilePath_assertionFailure() throws Exception {
        thrown.expect(AssertionError.class);
        readTaskBook(null);
    }

    @Test
    public void readTaskBook_missingFile_emptyResult() throws Exception {
        assertFalse(readTaskBook("NonExistentFile.json").isPresent());
    }

    @Test
    public void readTaskBook_notJsonFormat_exceptionThrown() throws Exception {
        thrown.expect(DataConversionException.class);
        readTaskBook("NotJsonFormatTaskBook.json");
    }

    @Test
    public void readAndSaveTaskBook_allInOrder_success() throws Exception {
        final String filePath = testFolder.getRoot().getPath() + "TempTaskBook.json";
        final TaskBook original = new TaskBookBuilder().addTypicalTasks().build();
        final JsonTaskBookStorage storage = new JsonTaskBookStorage(filePath);

        // Save in new file and read back
        storage.saveTaskBook(original);
        final ReadOnlyTaskBook readBack = storage.readTaskBook().get();
        assertEquals(original, readBack);
    }
}
```
###### src/test/java/seedu/address/storage/JsonLocalDateTimeDurationMixinTest.java

``` java
public class JsonLocalDateTimeDurationMixinTest {

    public static final LocalDateTimeDuration UNIX_EPOCH_1HR;
    public static final String UNIX_EPOCH_1HR_JSON = "{\"start\":[1970,1,1,0,0],\"end\":[1970,1,1,1,0]}";

    private static ObjectMapper objectMapper;

    static {
        try {
            UNIX_EPOCH_1HR = new LocalDateTimeDuration(UNIX_EPOCH, UNIX_EPOCH.plusHours(1));
        } catch (IllegalValueException e) {
            throw new RuntimeException(e);
        }
    }

    @BeforeClass
    public static void setupObjectMapper() {
        final SimpleModule module = new SimpleModule();
        module.setMixInAnnotation(LocalDateTimeDuration.class, JsonLocalDateTimeDurationMixin.class);
        objectMapper = new ObjectMapper();
        objectMapper.findAndRegisterModules().registerModule(module);
    }

    @Test
    public void serialize() throws Exception {
        final String expected = UNIX_EPOCH_1HR_JSON;
        final String actual = objectMapper.writeValueAsString(UNIX_EPOCH_1HR);
        assertEquals(expected, actual);
    }

    @Test
    public void deserialize() throws Exception {
        final LocalDateTimeDuration expected = UNIX_EPOCH_1HR;
        final LocalDateTimeDuration actual = objectMapper.readValue(UNIX_EPOCH_1HR_JSON,
                                                                    LocalDateTimeDuration.class);
        assertEquals(expected, actual);
    }

}
```
###### src/test/java/seedu/address/storage/JsonEventTaskMixinTest.java

``` java
public class JsonEventTaskMixinTest {

    private static ObjectMapper objectMapper;

    public static final EventTask TEST_EVENT;
    public static final String TEST_EVENT_JSON = "{\"name\":\"event name\",\"start\":[1970,1,1,0,0],"
                                                 + "\"end\":[1970,1,1,1,0]}";

    static {
        try {
            TEST_EVENT = new EventTask(new Name("event name"), UNIX_EPOCH, UNIX_EPOCH.plusHours(1));
        } catch (IllegalValueException e) {
            throw new RuntimeException(e);
        }
    }

    @BeforeClass
    public static void setupObjectMapper() {
        final SimpleModule module = new SimpleModule();
        module.setMixInAnnotation(Name.class, JsonNameMixin.class);
        module.setMixInAnnotation(EventTask.class, JsonEventTaskMixin.class);
        objectMapper = new ObjectMapper();
        objectMapper.findAndRegisterModules().registerModule(module);
    }

    @Test
    public void serialize() throws Exception {
        final String expected = TEST_EVENT_JSON;
        final String actual = objectMapper.writeValueAsString(TEST_EVENT);
        assertEquals(expected, actual);
    }

    @Test
    public void deserialize() throws Exception {
        final EventTask expected = TEST_EVENT;
        final EventTask actual = objectMapper.readValue(TEST_EVENT_JSON, EventTask.class);
        assertEquals(expected, actual);
    }

}
```
###### src/test/java/seedu/address/commons/time/LocalDateTimeDurationTest.java

``` java
public class LocalDateTimeDurationTest {

    @Rule
    public ExpectedException thrown = ExpectedException.none();

    @Test
    public void constructor_validArguments_works() throws Exception {
        final LocalDateTime start = UNIX_EPOCH;
        final LocalDateTime end = UNIX_EPOCH.plusDays(1);
        final LocalDateTimeDuration zonedDateTimeDuration = new LocalDateTimeDuration(start, end);
        assertEquals(start, zonedDateTimeDuration.getStart());
        assertEquals(end, zonedDateTimeDuration.getEnd());
    }

    @Test
    public void constructor_zeroDuration_works() throws Exception {
        final LocalDateTime start = UNIX_EPOCH;
        final LocalDateTime end = UNIX_EPOCH;
        final LocalDateTimeDuration zonedDateTimeDuration = new LocalDateTimeDuration(start, end);
        assertEquals(start, zonedDateTimeDuration.getStart());
        assertEquals(end, zonedDateTimeDuration.getEnd());
    }

    @Test
    public void constructor_endBeforeBegin_throwsException() throws Exception {
        final LocalDateTime start = UNIX_EPOCH;
        final LocalDateTime end = UNIX_EPOCH.minusDays(1);
        thrown.expect(IllegalValueException.class);
        new LocalDateTimeDuration(start, end);
    }

    @Test
    public void addTo_ZonedDateTime_addsDuration() throws Exception {
        final LocalDateTime start = UNIX_EPOCH;
        final LocalDateTime end = UNIX_EPOCH.plusHours(1);
        final LocalDateTimeDuration duration = new LocalDateTimeDuration(start, end);

        final LocalDateTime expected = PI_DAY.plusHours(1);
        // LocalDateTime.plus() calls LocalDateTimeDuration.addTo() internally
        final LocalDateTime actual = PI_DAY.plus(duration);
        assertEquals(expected, actual);
    }

    @Test
    public void get_seconds_returnsCorrectResult() throws Exception {
        final LocalDateTime start = UNIX_EPOCH;
        final LocalDateTime end = UNIX_EPOCH.plusHours(1).plusMinutes(32);
        final LocalDateTimeDuration duration = new LocalDateTimeDuration(start, end);

        assertEquals(5520, duration.get(ChronoUnit.SECONDS));
    }

    @Test
    public void getUnits_returnsAtLeastOneUnit() throws Exception {
        final LocalDateTime start = UNIX_EPOCH;
        final LocalDateTime end = UNIX_EPOCH.plusHours(1);
        final LocalDateTimeDuration duration = new LocalDateTimeDuration(start, end);

        final List<TemporalUnit> units = duration.getUnits();
        assertTrue(units.size() > 0);
    }

    @Test
    public void subtractFrom_ZonedDateTime_subtractsDuration() throws Exception {
        final LocalDateTime start = UNIX_EPOCH;
        final LocalDateTime end = UNIX_EPOCH.plusHours(1);
        final LocalDateTimeDuration duration = new LocalDateTimeDuration(start, end);

        final LocalDateTime expected = PI_DAY.minusHours(1);
        // LocalDateTime.minus() calls LocalDateTimeDuration.subtractFrom() internally
        final LocalDateTime actual = PI_DAY.minus(duration);
        assertEquals(expected, actual);
    }

    @Test
    public void equals_isEquals_returnsTrue() throws Exception {
        final LocalDateTime start = UNIX_EPOCH;
        final LocalDateTime end = UNIX_EPOCH.plusHours(1);
        final LocalDateTimeDuration duration = new LocalDateTimeDuration(start, end);
        final LocalDateTimeDuration other = new LocalDateTimeDuration(start, end);
        assertTrue(duration.equals(other));
    }

    @Test
    public void equals_notEquals_returnsFalse() throws Exception {
        final LocalDateTime start = UNIX_EPOCH;
        final LocalDateTime end = UNIX_EPOCH.plusHours(1);
        final LocalDateTimeDuration duration = new LocalDateTimeDuration(start, end);
        final LocalDateTime otherEnd = UNIX_EPOCH.plusHours(2);
        final LocalDateTime otherStart = UNIX_EPOCH.minusHours(1);
        assertFalse(duration.equals(new LocalDateTimeDuration(start, otherEnd)));
        assertFalse(duration.equals(new LocalDateTimeDuration(otherStart, end)));
    }

}
```
